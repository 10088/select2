{"version":3,"file":"select25.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/preact/dist/preact.module.js","../control/src/announce.ts","../control/src/dictionary.ts","../control/src/util.ts","../control/src/abstract-select.tsx","../control/src/dropdown.tsx","../control/src/icons.tsx","../control/src/style.ts","../control/src/result-list.tsx","../control/src/multi-select.tsx","../control/src/single-select.tsx","../bridge/src/store.ts","../bridge/src/select25.tsx","../bridge/src/data.ts","../bridge/src/ajax.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport const __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nconst __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","var n,l,u,i,t,r,o,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function v(n){var l=n.parentNode;l&&l.removeChild(n)}function h(n,l,u){var i,t=arguments,r={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(r[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(r.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===r[i]&&(r[i]=n.defaultProps[i]);return p(n,r,l&&l.key,l&&l.ref,null)}function p(l,u,i,t,r){var o={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(o.__v=o),n.vnode&&n.vnode(o),o}function y(){return{}}function d(n){return n.children}function m(n,l){this.props=n,this.context=l}function w(n,l){if(null==l)return n.__?w(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?w(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function g(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!i++||r!==n.debounceRendering)&&((r=n.debounceRendering)||t)(_)}function _(){for(var n;i=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,r,o,f;n.__d&&(o=(r=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=a({},r)).__v=i,t=A(f,r,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==o?w(r):o),T(u,r),t!=o&&k(r)))})}function b(n,l,u,i,t,r,o,f,s){var a,h,p,y,d,m,k,g=u&&u.__k||c,_=g.length;if(f==e&&(f=null!=r?r[0]:_?w(u,0):null),a=0,l.__k=x(l.__k,function(u){if(null!=u){if(u.__=l,u.__b=l.__b+1,null===(p=g[a])||p&&u.key==p.key&&u.type===p.type)g[a]=void 0;else for(h=0;h<_;h++){if((p=g[h])&&u.key==p.key&&u.type===p.type){g[h]=void 0;break}p=null}if(y=A(n,u,p=p||e,i,t,r,o,f,s),(h=u.ref)&&p.ref!=h&&(k||(k=[]),p.ref&&k.push(p.ref,null,u),k.push(h,u.__c||y,u)),null!=y){var c;if(null==m&&(m=y),void 0!==u.__d)c=u.__d,u.__d=void 0;else if(r==p||y!=f||null==y.parentNode){n:if(null==f||f.parentNode!==n)n.appendChild(y),c=null;else{for(d=f,h=0;(d=d.nextSibling)&&h<_;h+=2)if(d==y)break n;n.insertBefore(y,f),c=f}\"option\"==l.type&&(n.value=\"\")}f=void 0!==c?c:y.nextSibling,\"function\"==typeof l.type&&(l.__d=f)}else f&&p.__e==f&&f.parentNode!=n&&(f=w(p))}return a++,u}),l.__e=m,null!=r&&\"function\"!=typeof l.type)for(a=r.length;a--;)null!=r[a]&&v(r[a]);for(a=_;a--;)null!=g[a]&&D(g[a],g[a]);if(k)for(a=0;a<k.length;a++)j(k[a],k[++a],k[++a])}function x(n,l,u){if(null==u&&(u=[]),null==n||\"boolean\"==typeof n)l&&u.push(l(null));else if(Array.isArray(n))for(var i=0;i<n.length;i++)x(n[i],l,u);else u.push(l?l(\"string\"==typeof n||\"number\"==typeof n?p(null,n,null,null,n):null!=n.__e||null!=n.__c?p(n.type,n.props,n.key,null,n.__v):n):n);return u}function P(n,l,u,i,t){var r;for(r in u)\"children\"===r||\"key\"===r||r in l||N(n,r,null,u[r],i);for(r in l)t&&\"function\"!=typeof l[r]||\"children\"===r||\"key\"===r||\"value\"===r||\"checked\"===r||u[r]===l[r]||N(n,r,l[r],u[r],i)}function C(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===s.test(l)?u+\"px\":null==u?\"\":u}function N(n,l,u,i,t){var r,o,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"style\"===l)if(r=n.style,\"string\"==typeof u)r.cssText=u;else{if(\"string\"==typeof i&&(r.cssText=\"\",i=null),i)for(e in i)u&&e in u||C(r,e,\"\");if(u)for(c in u)i&&u[c]===i[c]||C(r,c,u[c])}else\"o\"===l[0]&&\"n\"===l[1]?(o=l!==(l=l.replace(/Capture$/,\"\")),f=l.toLowerCase(),l=(f in n?f:l).slice(2),u?(i||n.addEventListener(l,z,o),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,z,o)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function z(l){this.l[l.type](n.event?n.event(l):l)}function A(l,u,i,t,r,o,f,e,c){var s,v,h,p,y,w,k,g,_,x,P=u.type;if(void 0!==u.constructor)return null;(s=n.__b)&&s(u);try{n:if(\"function\"==typeof P){if(g=u.props,_=(s=P.contextType)&&t[s.__c],x=s?_?_.props.value:s.__:t,i.__c?k=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(g,x):(u.__c=v=new m(g,x),v.constructor=P,v.render=E),_&&_.sub(v),v.props=g,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=a({},v.__s)),a(v.__s,P.getDerivedStateFromProps(g,v.__s))),p=v.props,y=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==p&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(g,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(g,v.__s,x)||u.__v===i.__v&&!v.__){for(v.props=g,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),s=0;s<u.__k.length;s++)u.__k[s]&&(u.__k[s].__=u);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(g,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(p,y,w)})}v.context=x,v.props=g,v.state=v.__s,(s=n.__r)&&s(u),v.__d=!1,v.__v=u,v.__P=l,s=v.render(v.props,v.state,v.context),u.__k=null!=s&&s.type==d&&null==s.key?s.props.children:Array.isArray(s)?s:[s],null!=v.getChildContext&&(t=a(a({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(p,y)),b(l,u,i,t,r,o,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),k&&(v.__E=v.__=null),v.__e=!1}else null==o&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=$(i.__e,u,i,t,r,o,f,c);(s=n.diffed)&&s(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function T(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function $(n,l,u,i,t,r,o,f){var s,a,v,h,p,y=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=r)for(s=0;s<r.length;s++)if(null!=(a=r[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,r[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),r=null,f=!1}if(null===l.type)y!==d&&n.data!=d&&(n.data=d);else{if(null!=r&&(r=c.slice.call(n.childNodes)),v=(y=u.props||e).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!f){if(y===e)for(y={},p=0;p<n.attributes.length;p++)y[n.attributes[p].name]=n.attributes[p].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}P(n,d,y,t,f),h?l.__k=[]:(l.__k=l.props.children,b(n,l,u,i,\"foreignObject\"!==l.type&&t,r,o,e,f)),f||(\"value\"in d&&void 0!==(s=d.value)&&s!==n.value&&N(n,\"value\",s,y.value,!1),\"checked\"in d&&void 0!==(s=d.checked)&&s!==n.checked&&N(n,\"checked\",s,y.checked,!1))}return n}function j(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function D(l,u,i){var t,r,o;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||j(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(r=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(o=0;o<t.length;o++)t[o]&&D(t[o],u,i);null!=r&&v(r)}function E(n,l,u){return this.constructor(n,u)}function H(l,u,i){var t,r,f;n.__&&n.__(l,u),r=(t=i===o)?null:i&&i.__k||u.__k,l=h(d,null,[l]),f=[],A(u,(t?u:i||u).__k=l,r||e,e,void 0!==u.ownerSVGElement,i&&!t?[i]:r?null:c.slice.call(u.childNodes),f,i||e,t),T(f,l)}function I(n,l){H(n,l,o)}function L(n,l){var u,i;for(i in l=a(a({},n.props),l),arguments.length>2&&(l.children=c.slice.call(arguments,2)),u={},l)\"key\"!==i&&\"ref\"!==i&&(u[i]=l[i]);return p(n.type,u,l.key||n.key,l.ref||n.ref,null)}function M(n){var l={},u={__c:\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(n){t.props.value!==n.value&&i.some(function(l){l.context=n.value,g(l)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u.Provider.__=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return g(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},m.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),g(this))},m.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),g(this))},m.prototype.render=d,u=[],i=0,t=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o=e,f=0;export{H as render,I as hydrate,h as createElement,h,d as Fragment,y as createRef,l as isValidElement,m as Component,L as cloneElement,M as createContext,x as toChildArray,D as _unmount,n as options};\n//# sourceMappingURL=preact.module.js.map\n","export function initialize() {\n    if (document.getElementById('s25-live')) {\n        return;\n    }\n\n    const live = document.createElement('div');\n    live.setAttribute('id', 's25-live');\n    live.setAttribute('class', 's25-offscreen s25-live');\n    document.body.appendChild(live);\n\n    const assertive = document.createElement('div');\n    assertive.setAttribute('id', 's25-live-assertive');\n    assertive.setAttribute('role', 'log');\n    assertive.setAttribute('aria-live', 'assertive');\n    assertive.setAttribute('aria-relevant', 'additions');\n    live.appendChild(assertive);\n\n    const polite = document.createElement('div');\n    polite.setAttribute('id', 's25-live-polite');\n    polite.setAttribute('role', 'log');\n    polite.setAttribute('aria-live', 'polite');\n    polite.setAttribute('aria-relevant', 'additions');\n    live.appendChild(polite);\n}\n\nexport function assertively(message: string) {\n    add(message, document.getElementById('s25-live-assertive')!);\n}\n\nexport function politely(message: string) {\n    add(message, document.getElementById('s25-live-polite')!);\n}\n\nfunction add(message: string, container: HTMLElement) {\n    const node = document.createElement('div');\n    node.appendChild(document.createTextNode(message));\n    container.appendChild(node);\n\n    // clean up old nodes\n\n    let collection = document.getElementById('s25-live-assertive')!;\n    while (collection.firstChild && collection.firstChild !== node) {\n        collection.removeChild(collection.firstChild);\n    }\n    collection = document.getElementById('s25-live-polite')!;\n    while (collection.firstChild && collection.firstChild !== node) {\n        collection.removeChild(collection.firstChild);\n    }\n}\n","// TODO make it so keys can be strings in addition to functions\nexport interface Dictionary {\n    valueAdded(itemLabel: string): string;\n    noSearchResults(): string;\n    searchResultsLoading(): string;\n    removeButtonTitle(): string;\n    clearButtonTitle(): string;\n    minimumCharactersMessage(len: number, min: number): string;\n    multiSelectInstructions(): string;\n    expandButtonTitle(): string;\n    maximumValuesSelectedMessage(max: number): string;\n}\n\nconst EN_US: Dictionary = {\n    noSearchResults() {\n        return 'No results available';\n    },\n\n    searchResultsLoading() {\n        return 'Loading...';\n    },\n\n    removeButtonTitle() {\n        return 'Remove selected values';\n    },\n\n    clearButtonTitle() {\n        return 'Clear selection';\n    },\n\n    valueAdded(itemLabel: string) {\n        return itemLabel + ' added';\n    },\n\n    minimumCharactersMessage(len: number, min: number) {\n        const delta = min - len;\n        return 'Please enter ' + delta + ' more character' + (delta > 1 ? 's' : '');\n    },\n\n    multiSelectInstructions(): string {\n        return \"Items can be removed from this list box by selecting them and activating 'Remove selected values' button. Items can be added by selecting them in the adjacent combobox.\";\n    },\n\n    expandButtonTitle(): string {\n        return 'Expand';\n    },\n    maximumValuesSelectedMessage(max: number): string {\n        return 'Maximum number of values already selected';\n    }\n};\n\nconst dictionaries = new Map<string, Dictionary>();\ndictionaries.set('en_us', EN_US);\n\nexport function getDictionary(dict?: string | undefined): Dictionary {\n    const fallback: Dictionary = dictionaries.get('en_us') as Dictionary;\n\n    if (!dict) {\n        return fallback;\n    }\n\n    if (typeof dict === 'string') {\n        const instance = dictionaries.get(dict);\n        return instance ? instance : fallback;\n    } else {\n        return dict;\n    }\n}\n","import { ComponentChild } from 'preact';\n\nexport function extend(...params: object[]) {\n    for (let i = 1; i < arguments.length; i++) {\n        for (const key in arguments[i]) {\n            if (arguments[i].hasOwnProperty(key)) {\n                if (typeof arguments[0][key] === 'object' && typeof arguments[i][key] === 'object') {\n                    extend(arguments[0][key], arguments[i][key]);\n                } else {\n                    arguments[0][key] = arguments[i][key];\n                }\n            }\n        }\n    }\n    return arguments[0];\n}\n\nexport type DeepPartial<T> = {\n    [P in keyof T]?: T[P] extends Array<infer U>\n        ? Array<DeepPartial<U>>\n        : T[P] extends ReadonlyArray<infer V>\n        ? ReadonlyArray<DeepPartial<V>>\n        : DeepPartial<T[P]>\n};\n\nexport const merge = <T>(target: T, sources: Array<DeepPartial<T>>): T => {\n    if (!sources.length) {\n        return target;\n    }\n    const source = sources.shift();\n    if (source === undefined) {\n        return merge(target, sources);\n    }\n\n    if (isMergebleObject(target) && isMergebleObject(source)) {\n        Object.keys(source).forEach((key: string) => {\n            if (isMergebleObject(source[key])) {\n                if (!target[key]) {\n                    target[key] = {};\n                }\n                merge(target[key], [source[key]]);\n            } else {\n                target[key] = source[key];\n            }\n        });\n    }\n\n    return merge(target, sources);\n};\n\nconst isObject = (item: any): boolean => {\n    return item !== null && typeof item === 'object';\n};\n\nconst isMergebleObject = (item): boolean => {\n    return isObject(item) && !Array.isArray(item);\n};\n\nexport function cn(...values: any) {\n    const classes: string[] = [];\n    const hasOwnProperty = {}.hasOwnProperty;\n\n    for (const value of values) {\n        if (typeof value === 'string' && value.length > 0) {\n            classes.push(value);\n        } else if (typeof value === 'object') {\n            for (const key in value as object) {\n                if (hasOwnProperty.call(value, key) && value[key]) {\n                    classes.push(key);\n                }\n            }\n        }\n    }\n\n    return classes.join(' ');\n}\n\nexport enum Key {\n    // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\n    ArrowDown = 'ArrowDown',\n    ArrowUp = 'ArrowUp',\n    ArrowLeft = 'ArrowLeft',\n    ArrowRight = 'ArrowRight',\n    Space = ' ',\n    Enter = 'Enter',\n    Tab = 'Tab',\n    Home = 'Home',\n    End = 'End',\n    PageUp = 'PageUp',\n    PageDown = 'PageDown',\n    Backspace = 'Backspace',\n    Delete = 'Delete',\n    Clear = 'Clear',\n    Escape = 'Escape',\n    // IE 11\n    Down = 'Down',\n    Up = 'Up',\n    Spacebar = 'Spacebar',\n    Left = 'Left',\n    Right = 'Right'\n}\n\nexport const uuid = (() => {\n    let counter = 0;\n    return () => 's25-' + counter++;\n})();\n\nexport function throttle(delay: number, callback: () => void): () => void {\n    let timeout: number | undefined;\n    return () => {\n        if (timeout !== undefined) {\n            window.clearTimeout(timeout);\n            timeout = undefined;\n        } else {\n            timeout = window.setTimeout(() => {\n                callback();\n                timeout = undefined;\n            }, delay);\n        }\n    };\n}\n\n// @ts-ignore\nexport function debounce(quiet: number, delegate: (...args: any[]) => void, that: object) {\n    const args = Array.from(arguments);\n    if (quiet <= 0) {\n        return () => {\n            delegate.apply(that, args);\n        };\n    } else {\n        let timeout: number | undefined;\n        return () => {\n            if (timeout) {\n                window.clearTimeout(timeout);\n            }\n            timeout = window.setTimeout(() => {\n                timeout = undefined;\n                delegate.apply(that, args);\n            }, quiet);\n        };\n    }\n}\n\nexport function getScrollParents(el: HTMLElement): EventTarget[] {\n    const style = window.getComputedStyle(el);\n    const elementPosition = style.position;\n    if (elementPosition === 'fixed') {\n        return [el];\n    }\n\n    const parents: Array<HTMLElement | Window> = [];\n    let parent = el.parentElement;\n\n    while (parent && parent.nodeType === 1) {\n        const css = window.getComputedStyle(parent);\n        if (/(overlay|scroll|auto)/.test(css.overflow + ' ' + css.overflowX + ' ' + css.overflowY)) {\n            if (elementPosition !== 'absolute' || ['relative', 'fixed', 'absolute'].indexOf(css.position || '') >= 0) {\n                parents.push(parent);\n            }\n        }\n        parent = parent.parentElement;\n    }\n\n    if (el.ownerDocument) {\n        parents.push(el.ownerDocument.body);\n    }\n\n    // iframe\n    if (el.ownerDocument !== document && el.ownerDocument && el.ownerDocument.defaultView) {\n        parents.push(el.ownerDocument.defaultView);\n    }\n\n    parents.push(window);\n    return parents;\n}\n\nexport function calculateVerticalVisibility(\n    container: HTMLElement,\n    element: HTMLElement\n): 'hidden' | 'partial-top' | 'partial-bottom' | 'visible' {\n    const c = container.getBoundingClientRect();\n    const e = element.getBoundingClientRect();\n\n    if (e.bottom < c.top) {\n        // above the fold\n        return 'hidden';\n    }\n\n    if (e.top > c.bottom) {\n        // below the fold\n        return 'hidden';\n    }\n\n    if (e.top < c.top && e.bottom <= c.bottom) {\n        return 'partial-top';\n    }\n\n    if (e.top >= c.top && e.bottom > c.bottom) {\n        return 'partial-bottom';\n    }\n\n    return 'visible';\n}\n\nexport type MouseEventListener = (event: MouseEvent) => void;\nexport type KeyboardEventListener = (event: KeyboardEvent) => void;\nexport type EventListener = (event: Event) => void;\nexport type FocusEventListener = (event: FocusEvent) => void;\n\n/** helper that makes it easier to declare a scope inside a jsx block */\nexport function scope(delegate: () => ComponentChild) {\n    return delegate();\n}\n","import { Component, ComponentChild, h, h as createElement } from 'preact';\nimport * as announce from './announce';\nimport { Dictionary, getDictionary } from './dictionary';\nimport { DeepPartial, Key, merge, uuid } from './util';\nconst forceImportOfH = h;\n\ntype ToString = (item: any) => string;\n\nexport type DataItemRenderer = string | ((item: any, h: typeof createElement) => ComponentChild);\n\nexport type QueryFunction = (search: string, page: number, token: string) => Promise<QueryResult>;\n\nexport interface DataItem {\n    id: any;\n    text: string;\n}\n\nexport interface QueryResult {\n    values: DataItem[];\n    more: boolean;\n    token: string;\n}\n\nexport interface ResultListState {\n    results: any[];\n    token: string;\n    active: number;\n    page: number;\n\n    showMinimumCharactersError: boolean;\n    showNoSearchResultsFound: boolean;\n    showLoadMoreResults: boolean;\n}\nexport interface State {\n    search: string;\n    results: ResultListState;\n    loading: boolean;\n    open: boolean;\n    focused: boolean;\n}\n\nexport interface Props {\n    containerStyle?: string;\n    cssClass?: string;\n    tabIndex?: number;\n    valueContent?: DataItemRenderer;\n    resultContent?: DataItemRenderer;\n\n    query: QueryFunction;\n    quiet?: number;\n    allowDuplicates?: boolean;\n    minimumCharacters?: number;\n    openOnFocus?: boolean;\n    dictionary?: string | Dictionary;\n}\n\nfunction MarkupRenderer({ markup }) {\n    return <div dangerouslySetInnerHTML={{ __html: markup }}> </div>;\n}\n\nexport const DEFAULT_PROPS: Partial<Props> = {\n    allowDuplicates: false,\n    minimumCharacters: 0,\n    quiet: 50,\n    tabIndex: 0\n};\n\nexport abstract class AbstractSelect<P extends Props, S extends State> extends Component<P, S> {\n    private searchTimeout: number | undefined;\n    protected namespace: string;\n\n    constructor(props: P) {\n        super(props);\n        this.searchTimeout = undefined;\n        this.namespace = uuid();\n        // @ts-ignore\n        this.state = {\n            focused: false,\n            loading: false,\n            open: false,\n            results: {\n                active: -1,\n                page: 0,\n                results: undefined, // TODO rename to values\n                token: null,\n\n                showLoadMoreResults: false,\n                showMinimumCharactersError: false,\n                showNoSearchResultsFound: false\n            },\n            search: ''\n        };\n    }\n\n    public getItemId = (item: DataItem): string => {\n        return item.id;\n    };\n\n    public getItemLabel = (item: DataItem): string => {\n        const label = item.text;\n        return item.text;\n    };\n\n    public renderValue = (item: DataItem): ComponentChild => {\n        return this.renderItem(item, 'valueContent');\n    };\n\n    public renderResult = (item: DataItem): ComponentChild => {\n        return this.renderItem(item, 'resultContent');\n    };\n\n    private renderItem = (item: DataItem, rendererName: keyof Props & DataItemRenderer): ComponentChild => {\n        const renderer = this.props[rendererName] as DataItemRenderer;\n        if (renderer) {\n            if (typeof renderer === 'function') {\n                const render = renderer(item, createElement);\n                if (typeof render === 'string') {\n                    return <MarkupRenderer markup={render} />;\n                } else {\n                    return render;\n                }\n            } else {\n                return <MarkupRenderer markup={item[renderer]} />;\n            }\n        } else {\n            return <MarkupRenderer markup={this.getItemLabel(item)} />;\n        }\n    };\n\n    get dictionary(): Dictionary {\n        const dict = this.props.dictionary;\n        if (dict) {\n            if (typeof dict === 'string') {\n                return getDictionary(dict);\n            } else {\n                return dict as Dictionary;\n            }\n        } else {\n            return getDictionary();\n        }\n    }\n\n    protected updateState(update: DeepPartial<S> | Array<DeepPartial<S>>, callback?: () => void) {\n        const state = merge(this.state, Array.isArray(update) ? update : [update]);\n        this.setState(state, callback);\n    }\n\n    public search = (query, selectedValues, start?: DeepPartial<S>, callback?: () => void) => {\n        const dictionary = this.dictionary;\n        const { minimumCharacters, allowDuplicates, quiet, query: queryFunc } = this.props;\n\n        const current = this.state.results;\n\n        const minimumCharactersReached = query.length >= (minimumCharacters||0);\n        const token = minimumCharactersReached ? uuid() : undefined;\n\n        const control = this;\n\n        this.updateState(\n            // @ts-ignore\n            [\n                start,\n                {\n                    loading: minimumCharactersReached,\n                    results: {\n                        active: -1,\n                        page: 0,\n                        results: undefined,\n                        showLoadMoreResults: false,\n                        showMinimumCharactersError: !minimumCharactersReached,\n                        showNoSearchResultsFound: false,\n                        token\n                    },\n                    search: query\n                }\n            ],\n            () => {\n                if (callback) {\n                    callback();\n                }\n\n                if (!minimumCharactersReached) {\n                    // todo - throttle this announcement?\n                    announce.politely(dictionary.minimumCharactersMessage(query.length, minimumCharacters!));\n                    return;\n                }\n\n                // todo - throttle this announcement?\n                // announce.politely(dictionary.searchResultsLoading());\n\n                const execute = async () => {\n                    try {\n                        const result = await queryFunc(query, 0, token!);\n                        if (result.token !== control.state.results.token) {\n                            // this is a stale result, ignore\n                            return;\n                        }\n\n                        let values = result.values || [];\n                        if (!allowDuplicates && values.length > 0 && selectedValues.length > 0) {\n                            const ids = new Set<string>();\n                            selectedValues.forEach(v => ids.add(control.getItemId(v)));\n                            values = values.filter(v => !ids.has(control.getItemId(v)));\n                        }\n\n                        if (values.length < 1) {\n                            announce.politely(dictionary.noSearchResults());\n                        }\n\n                        // @ts-ignore\n                        control.updateState({\n                            loading: false,\n                            results: {\n                                active: values.length > 0 ? 0 : -1,\n                                page: 0,\n                                results: values,\n                                showLoadMoreResults: result.more,\n                                showNoSearchResultsFound: values.length < 1\n                            }\n                        });\n                    } catch (e) {\n                        // @ts-ignore\n                        control.updateState({ loading: false });\n                    }\n                };\n\n                if (quiet && quiet > 0) {\n                    if (control.searchTimeout) {\n                        window.clearTimeout(control.searchTimeout);\n                    }\n                    control.searchTimeout = window.setTimeout(execute, quiet);\n                } else {\n                    execute();\n                }\n            }\n        );\n    };\n\n    public loadMore() {\n        const {\n            loading,\n            search: query,\n            results: { page }\n        } = this.state;\n        const dict = this.dictionary;\n        const { query: queryFunc } = this.props;\n        const control = this;\n\n        if (loading) {\n            return;\n        }\n\n        const token = uuid();\n        const nextPage = page + 1;\n\n        this.updateState(\n            // @ts-ignore\n            {\n                loading: true,\n                results: {\n                    token\n                }\n            },\n            async () => {\n                // TODO throttle?\n                // announce.politely(dict.searchResultsLoading());\n\n                try {\n                    const result = await queryFunc(query, nextPage, token);\n\n                    const current = control.state.results;\n\n                    if (result.token !== current.token) {\n                        // this is a stale result, ignore\n                        return;\n                    }\n\n                    if (result.values && result.values.length > 0) {\n                        // @ts-ignore\n                        control.updateState({\n                            loading: false,\n                            results: {\n                                page: nextPage,\n                                results: current.results.concat(result.values),\n                                showLoadMoreResults: result.more\n                            }\n                        });\n                    } else {\n                        announce.politely(dict.noSearchResults());\n                        // @ts-ignore\n                        control.updateState({\n                            loading: false,\n                            results: {\n                                showLoadMoreResults: false\n                            }\n                        });\n                    }\n                } catch (e) {\n                    // @ts-ignore\n                    control.updateState({ loading: false });\n                }\n            }\n        );\n    }\n\n    protected handleResultNavigationKeyDown(event: KeyboardEvent): boolean {\n        switch (event.key) {\n            case Key.ArrowUp:\n            case Key.Up:\n                this.selectPreviousSearchResult();\n                event.preventDefault();\n                return true;\n            case Key.ArrowDown:\n            case Key.Down:\n                this.selectNextSearchResult();\n                event.preventDefault();\n                return true;\n        }\n        return false;\n    }\n\n    protected selectNextSearchResult() {\n        const { active, results } = this.state.results;\n        if (results && active < results.length - 1) {\n            // @ts-ignore\n            this.updateState({ results: { active: active + 1 } });\n        }\n    }\n\n    protected selectPreviousSearchResult() {\n        const { active } = this.state.results;\n        if (active > 0) {\n            // @ts-ignore\n            this.updateState({ results: { active: active - 1 } });\n        }\n    }\n\n    protected getSelectedSearchResult() {\n        const { results, active } = this.state.results;\n        return results[active];\n    }\n\n    protected selectSearchResult(index: number) {\n        const { active } = this.state.results;\n        if (active !== index) {\n            // @ts-ignore\n            this.updateState({ results: { active: index } });\n        }\n    }\n\n    protected hasSearchResults() {\n        const results = this.state.results.results;\n        return results && results.length > 0;\n    }\n}\n","import { Component, ComponentChild, Fragment, h, RefObject, render } from 'preact';\nimport { getScrollParents, MouseEventListener, throttle } from './util';\n\nclass ContextProvider extends Component<{ context: any }> {\n    public getChildContext() {\n        return this.props.context;\n    }\n    public render() {\n        return this.props.children;\n    }\n}\n\nfunction Portal({ vnode, container }): null {\n    // @ts-ignore\n    const wrap = <ContextProvider context={this.context}>{vnode}</ContextProvider>;\n    render(wrap, container);\n    return null;\n}\n\nfunction createPortal(vnode, container): ComponentChild {\n    return h(Portal, { vnode, container });\n}\n\ninterface Props {\n    controlRef: RefObject<HTMLElement>;\n    dropdownRef: RefObject<HTMLElement>;\n    class?: string;\n    onClick?: MouseEventListener;\n    onMouseDown?: MouseEventListener;\n    onFocusOut?: EventListener;\n    onComponentDidMount?: () => void;\n}\n\nexport class Dropdown extends Component<Props> {\n    private container?: HTMLElement;\n    private scrollParents?: EventTarget[];\n    private throttledPosition;\n\n    constructor(props) {\n        super(props);\n        this.throttledPosition = throttle(50, this.position.bind(this));\n    }\n\n    public componentWillMount() {\n        this.container = document.createElement('div');\n        if (this.props.class) {\n            this.container.className = this.props.class;\n        }\n\n        /*\n        this container needs to be able to receive focus so we can tell\n        it is not leaving the control - we consider dropdown part of the control\n        */\n        this.container.tabIndex = -1;\n        if (this.props.onClick) {\n            this.container.addEventListener('click', this.props.onClick);\n        }\n        if (this.props.onMouseDown) {\n            this.container.addEventListener('mousedown', this.props.onMouseDown);\n        }\n        if (this.props.onFocusOut) {\n            this.container.addEventListener('focusout', this.props.onFocusOut);\n        }\n        document.body.appendChild(this.container);\n    }\n\n    public componentDidMount() {\n        this.props.dropdownRef.current = this.container;\n        this.scrollParents = getScrollParents(this.props.controlRef.current!);\n        this.scrollParents.forEach(parent => {\n            ['resize', 'scroll', 'touchmove'].forEach(event => {\n                parent.addEventListener(event, this.throttledPosition);\n            });\n        });\n        this.position();\n\n        if (this.props.onComponentDidMount) {\n            this.props.onComponentDidMount();\n        }\n    }\n\n    public componentWillUnmount() {\n        if (this.scrollParents) {\n            this.scrollParents.forEach(parent => {\n                ['resize', 'scroll', 'touchmove'].forEach(event => {\n                    parent.removeEventListener(event, this.throttledPosition);\n                });\n            });\n            delete this.scrollParents;\n            this.scrollParents = undefined;\n        }\n\n        this.props.dropdownRef.current = undefined;\n        this.container!.parentElement!.removeChild(this.container!);\n    }\n\n    public componentDidUpdate() {\n        this.position();\n    }\n\n    public render(props) {\n        return createPortal(<Fragment>{this.props.children}</Fragment>, this.container!);\n    }\n\n    private position() {\n        const control = this.props.controlRef.current!;\n        const rect = control.getBoundingClientRect();\n        const style = `top: ${rect.top + rect.height + window.pageYOffset}px;\n            left: ${rect.left + window.pageXOffset}px;\n            width: ${rect.width}px;`;\n        this.container!.setAttribute('style', style);\n    }\n}\n","import { FunctionComponent, h } from 'preact';\n\nconst forceImportOfH = h;\n\ninterface Props {\n    width: number;\n    height: number;\n}\n\nexport const Toggle: FunctionComponent<Props> = ({ height, width }) => {\n    const viewBox = '0 0 ' + width + ' ' + height;\n    return (\n        <svg height={height} width={width} viewBox={viewBox} tabIndex={-1} focusable='false'>\n            <path d='M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z' />\n        </svg>\n    );\n};\nToggle.displayName = 'Toggle';\n\nexport const Remove: FunctionComponent<Props> = ({ width, height }) => {\n    const viewBox = '0 0 ' + width + ' ' + height;\n    return (\n        <svg height={height} width={width} viewBox={viewBox} tabIndex={-1} focusable='false'>\n            <path d='M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z' />\n        </svg>\n    );\n};\nRemove.displayName = 'Remove';\n","export const enum style {\n    control = 's25-control',\n    content = 's25-content',\n    single = 's25-single',\n    multi = 's25-multi',\n    body = 's25-body',\n    focused = 's25-focused',\n    active = 's25-active',\n    live = 's25-live',\n    multiValues = 's25-multi-values',\n    value = 's25-value',\n    item = 's25-item',\n    selected = 's25-selected',\n    toggle = 's25-toggle',\n    remove = 's25-remove',\n    open = 's25-open',\n    label = 's25-label',\n    search = 's25-search',\n    offscreen = 's25-offscreen',\n    searchContainer = 's25-search-container',\n    dropdown = 's25-dropdown',\n    searchResults = 's25-search-results',\n    options = 's25-options',\n    noSearchResults = 's25-no-search-results',\n    searchResultsMessage = 's25-search-results-message',\n    searchResultsLoading = 's25-search-results-loading',\n    searchResultsMinimumError = 's25-search-results-minimum-error',\n    searchResultsMaximumSelectedError = 's25-search-results-maximum-selected-error',\n    hiddenAccessible = 's25-hidden-accessible',\n    hidden = 's25-hidden',\n    placeholder = 's25-placeholder',\n    scroll = 's25-scroll'\n}\n","import { Component, ComponentChild, createRef, h, RefObject } from 'preact';\nimport { Dictionary } from './dictionary';\nimport { style } from './style';\nimport { calculateVerticalVisibility, cn } from './util';\n\nconst forceImportOfH = h;\n\n// TODO if upon render loading is visible signal loadmore\n\ninterface Props {\n    // TODO consistenly call search a query\n    namespace: string;\n    search: string;\n    listboxDomId?: string;\n    results: any[];\n    token: string;\n    active: number;\n    page: number;\n    loading: boolean;\n\n    itemLabel: (item: any) => string;\n    renderItem: (item: any) => ComponentChild;\n\n    dictionary: Dictionary;\n    minimumCharacters: number;\n\n    showMinimumCharactersError: boolean;\n    showNoSearchResultsFound: boolean;\n    showLoadMoreResults: boolean;\n\n    showMaximumValuesSelectedError: boolean;\n    maximumValues: number;\n\n    onResultClicked: (result: any, event: MouseEvent) => void;\n    onMouseMove: (index: any, event: MouseEvent) => void;\n    onLoadMore: () => void;\n}\n\nexport class ResultList extends Component<Props> {\n    private container: RefObject<HTMLDivElement>;\n    private lastMouseClientX?: number;\n    private lastMouseClientY?: number;\n    private loadMore: RefObject<HTMLDivElement>;\n    constructor(props) {\n        super(props);\n        this.container = createRef();\n        this.loadMore = createRef();\n    }\n\n    private getResultDomId(index: number) {\n        return this.props.namespace + index;\n    }\n\n    public render(props, state, context) {\n        const { dictionary, minimumCharacters, showLoadMoreResults, results } = props;\n        const query = this.props.search;\n\n        const overrideError = props.showMaximumValuesSelectedError;\n\n        return (\n            <div class={style.body}>\n                <div\n                    ref={this.container}\n                    onScroll={this.onScroll}\n                    class={style.searchResults}\n                    aria-busy={props.loading}\n                >\n                    {!overrideError && props.loading && (\n                        <div class={cn(style.searchResultsLoading, style.searchResultsMessage)}>\n                            {dictionary.searchResultsLoading()}\n                        </div>\n                    )}\n                    {!overrideError && props.showNoSearchResultsFound && (\n                        <div class={cn(style.noSearchResults, style.searchResultsMessage)}>\n                            {dictionary.noSearchResults()}\n                        </div>\n                    )}\n                    {!overrideError && props.showMinimumCharactersError && (\n                        <div class={cn(style.searchResultsMinimumError, style.searchResultsMessage)}>\n                            {dictionary.minimumCharactersMessage(query.length, minimumCharacters)}\n                        </div>\n                    )}\n                    {props.showMaximumValuesSelectedError && (\n                        <div class={cn(style.searchResultsMaximumSelectedError, style.searchResultsMessage)}>\n                            {dictionary.maximumValuesSelectedMessage(props.maximumValues)}\n                        </div>\n                    )}\n                    {!overrideError && results && results.length > 0 && (\n                        <div\n                            class={style.options}\n                            role='listbox'\n                            id={props.listboxDomId}\n                            aria-activedescendant={props.active >= 0 ? this.getResultDomId(props.active) : undefined}\n                        >\n                            {results.map((result, index) => {\n                                const label = props.itemLabel(result);\n                                const render = props.renderItem(result);\n                                const active = props.active === index;\n                                const css = cn(style.item, {\n                                    [style.active]: active\n                                });\n                                const id = this.getResultDomId(index);\n                                return (\n                                    <div\n                                        id={id}\n                                        class={css}\n                                        role='option'\n                                        onClick={this.onResultClicked(result)}\n                                        onMouseMove={this.onMouseMove(index)}\n                                        aria-posinset={index + 1}\n                                        aria-setsize={showLoadMoreResults ? results.length + 1 : results.length}\n                                        aria-selected={active}\n                                        aria-label={label}\n                                    >\n                                        <div class={style.content}>{render}</div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    )}\n                    {props.showLoadMoreResults && (\n                        <div\n                            ref={this.loadMore}\n                            class={cn(style.searchResultsMinimumError, style.searchResultsMessage)}\n                        >\n                            {dictionary.searchResultsLoading()}\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n\n    private onResultClicked = (result: any) => (event: MouseEvent) => {\n        this.props.onResultClicked(result, event);\n    };\n\n    private onMouseMove = (index: number) => (event: MouseEvent) => {\n        if (this.lastMouseClientX === event.clientX && this.lastMouseClientY === event.clientY) {\n            // the mouse did not move, the dropdown was scrolled instead, we do not change selected element because\n            // it will be scrolled into view and mess with the scrolling of the results in the dropdown\n            return;\n        }\n        this.lastMouseClientX = event.clientX;\n        this.lastMouseClientY = event.clientY;\n\n        this.props.onMouseMove(index, event);\n    };\n\n    private onScroll = (event: Event) => {\n        if (!this.props.showLoadMoreResults) {\n            return;\n        }\n        const more = this.loadMore.current!;\n        const drop = this.container.current!;\n\n        const visibility = calculateVerticalVisibility(drop, more);\n        if (visibility !== 'hidden') {\n            this.props.onLoadMore();\n        }\n    };\n\n    public componentDidUpdate(prevProps: Props, prevState: Props) {\n        const { active, results, showLoadMoreResults } = this.props;\n        const { active: prevActive } = prevProps;\n\n        if (active !== prevActive) {\n            if (active >= 0 && results && results.length > 0 && active === results.length - 1 && showLoadMoreResults) {\n                // last result is selected and load more is shown, make sure it is scrolled into view\n\n                const drop = this.container.current!;\n                const el = this.loadMore.current!;\n\n                drop.scrollTop = el.offsetTop + el.offsetHeight - drop.clientHeight;\n\n                // console.log(\"scrolling to see load more\");//, setting scrolltop\", drop, el, el.offsetTop - drop.clientHeight);\n            } else if (active >= 0) {\n                // make sure it is scrolled into view\n                const id = this.getResultDomId(active);\n                const el = document.getElementById(id);\n                if (el != null) {\n                    const drop = this.container!.current!;\n                    const c = drop.getBoundingClientRect();\n                    const e = el.getBoundingClientRect();\n\n                    if (e.top < c.top && e.bottom <= c.bottom) {\n                        const delta = c.top - e.top;\n                        drop.scrollTop = drop.scrollTop - delta;\n                    }\n\n                    if (e.top >= c.top && e.bottom > c.bottom) {\n                        const delta = e.bottom - c.bottom;\n                        drop.scrollTop = drop.scrollTop + delta;\n                    }\n                }\n            }\n        }\n    }\n}\n","import { createRef, Fragment, h, RefObject } from 'preact';\nimport {\n    AbstractSelect,\n    DataItem,\n    DEFAULT_PROPS as ABSTRACT_DEFAULT_PROPS,\n    Props as SearchControllerProps,\n    State as AbstractSelectState\n} from './abstract-select';\nimport * as announce from './announce';\nimport { Dropdown } from './dropdown';\nimport { Remove, Toggle } from './icons';\nimport { ResultList } from './result-list';\nimport { style } from './style';\nimport { cn, extend, Key, merge, scope } from './util';\n\nconst forceImportOfH = h;\n\nexport interface Props extends SearchControllerProps {\n    valuesLabel: string;\n    comboboxLabel: string;\n    values: DataItem[];\n    maxValues?: number;\n    onChange: (values: DataItem[]) => void;\n}\n\ninterface ValueListState {\n    active: number;\n    selected: boolean[];\n}\n\ninterface State extends AbstractSelectState {\n    values: ValueListState;\n}\n\nconst DEFAULT_PROPS = extend({}, ABSTRACT_DEFAULT_PROPS, { values: [] });\n\nexport class MultiSelect extends AbstractSelect<Props, State> {\n    private containerRef: RefObject<HTMLDivElement>;\n    private dropdownRef: RefObject<HTMLElement>;\n    private bodyRef: RefObject<HTMLDivElement>;\n    private valuesRef: RefObject<HTMLDivElement>;\n    private searchRef: RefObject<HTMLInputElement>;\n\n    public static defaultProps = DEFAULT_PROPS;\n\n    constructor(props) {\n        super(props);\n        const { values } = props;\n\n        this.valuesRef = createRef();\n        this.searchRef = createRef();\n        this.bodyRef = createRef();\n        this.containerRef = createRef();\n        this.dropdownRef = createRef();\n\n        this.state = extend(this.state, {\n            values: {\n                active: -1,\n                selected: values.map(v => false)\n            }\n        });\n    }\n\n    public componentWillMount() {\n        announce.initialize();\n    }\n\n    public render(props, state) {\n        const { values, tabIndex, minimumCharacters, valuesLabel, comboboxLabel, placeholder, maxValues } = props;\n        const {\n            open,\n            loading,\n            focused,\n            search,\n            values: { active, selected },\n            results\n        } = state;\n        const dictionary = this.dictionary;\n\n        const showPlaceholder = !values || values.length === 0;\n\n        const classes = cn(\n            this.props.cssClass,\n            style.control,\n            style.multi,\n            { [style.open]: open },\n            { [style.focused]: focused }\n        );\n\n        const instructionsDomId = this.namespace + '-instructions';\n        const resultsDomId = this.namespace + '-results';\n        const resultsNamespace = this.namespace + '-res-';\n\n        const maxValuesSelected = maxValues && values && values.length >= maxValues;\n\n        return (\n            <Fragment>\n                <div\n                    class={classes}\n                    ref={this.containerRef}\n                    onFocusCapture={this.onFocusIn}\n                    onBlurCapture={this.onFocusOut}\n                    tabIndex={-1}\n                    onMouseDown={this.focusSearchAndStopPropagation}\n                >\n                    <div class={cn(style.body)} ref={this.bodyRef} onClick={this.onBodyClick}>\n                        <div id={instructionsDomId} class={cn(style.offscreen)} style={{ display: 'none' }}>\n                            {dictionary.multiSelectInstructions()}\n                        </div>\n                        {scope(() => {\n                            const activeDescendant = active >= 0 ? this.namespace + '-vl-' + active : undefined;\n                            if (values && values.length > 0) {\n                                return (\n                                    <div\n                                        ref={this.valuesRef}\n                                        class={cn(style.multiValues)}\n                                        tabIndex={tabIndex}\n                                        role='listbox'\n                                        aria-orientation='vertical'\n                                        aria-multiselectable='true'\n                                        aria-activedescendant={activeDescendant}\n                                        aria-label={valuesLabel}\n                                        aria-describedby={instructionsDomId}\n                                        onFocus={this.onValuesFocus}\n                                        onBlur={this.onValuesBlur}\n                                        onKeyDown={this.onValuesKeyDown}\n                                    >\n                                        {values.map((value: DataItem, index: number) => {\n                                            const isSelected = selected[index];\n                                            const isActive = active === index;\n                                            const css = cn(style.item, {\n                                                [style.selected]: isSelected,\n                                                [style.active]: isActive\n                                            });\n                                            const id = this.namespace + '-vl-' + index;\n                                            const label = this.getItemLabel(value);\n                                            const render = this.renderValue(value);\n                                            return (\n                                                <div\n                                                    id={id}\n                                                    class={css}\n                                                    role='option'\n                                                    aria-selected={isSelected}\n                                                    aria-label={label}\n                                                    onMouseDown={(e: Event) => e.stopPropagation()}\n                                                    onClick={this.onValueClick(index)}\n                                                >\n                                                    <div class={style.content}>{render}</div>\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                );\n                            } else {\n                                return null;\n                            }\n                        })}\n                        {scope(() => {\n                            const disabled = !selected.find(x => x === true);\n                            const className = cn(style.remove, {\n                                [style.offscreen]: values.length < 1\n                            });\n                            return (\n                                <button\n                                    className={className}\n                                    onClick={this.onRemoveSelectedClick}\n                                    onFocus={this.onRemoveSelectedFocus}\n                                    disabled={disabled}\n                                    aria-disabled={disabled}\n                                    title={dictionary.removeButtonTitle()}\n                                    aria-label={dictionary.removeButtonTitle()}\n                                    type='button'\n                                >\n                                    <span>\n                                        <Remove width={20} height={20} />\n                                    </span>\n                                </button>\n                            );\n                        })}\n                        <label htmlFor={undefined} className={style.offscreen}>\n                            {comboboxLabel}\n                        </label>\n                        <input\n                            type='text'\n                            ref={this.searchRef}\n                            value={search}\n                            class={cn(style.search)}\n                            role='combobox'\n                            aria-label={props.comboboxLabel}\n                            aria-autocomplete='list'\n                            aria-haspopup='true'\n                            aria-owns={resultsDomId}\n                            aria-controls={resultsDomId}\n                            aria-expanded={open ? 'true' : 'false'}\n                            aria-activedescendant={results.active >= 0 ? resultsNamespace + results.active : undefined}\n                            aria-busy={loading}\n                            onInput={this.onSearchInput}\n                            onKeyDown={this.onSearchKeyDown}\n                            onFocus={this.onSearchFocus}\n                            placeholder={showPlaceholder ? placeholder : undefined}\n                        />\n                        <div\n                            className={cn(style.toggle)}\n                            aria-hidden={true}\n                            tabIndex={-1}\n                            onClick={this.onToggleClick}\n                            title={dictionary.expandButtonTitle()}\n                        >\n                            <Toggle height={20} width={20} />\n                        </div>\n                    </div>\n                </div>\n                {open && (\n                    <Dropdown\n                        class={cn(this.props.cssClass, style.dropdown, style.multi)}\n                        onClick={this.onDropdownClick}\n                        controlRef={this.containerRef}\n                        dropdownRef={this.dropdownRef}\n                    >\n                        <ResultList\n                            namespace={resultsNamespace}\n                            showMaximumValuesSelectedError={maxValuesSelected}\n                            maximumValues={maxValues}\n                            minimumCharacters={minimumCharacters}\n                            dictionary={this.dictionary}\n                            itemLabel={this.getItemLabel}\n                            renderItem={this.renderResult}\n                            listboxDomId={resultsDomId}\n                            search={search}\n                            {...this.state.results}\n                            loading={loading}\n                            onResultClicked={this.onResultClicked}\n                            onMouseMove={this.onResultMouseMove}\n                            onLoadMore={this.onLoadMoreResults}\n                        />\n                    </Dropdown>\n                )}\n            </Fragment>\n        );\n    }\n\n    public componentDidMount() {\n        const css = this.props.containerStyle;\n        if (css && css.length > 0) {\n            this.containerRef.current!.setAttribute('style', css);\n        }\n    }\n\n    private onLoadMoreResults = () => {\n        this.loadMore();\n    };\n\n    private focusSearchAndStopPropagation = (event: Event) => {\n        this.searchRef.current!.focus();\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    public onToggleClick = (event: MouseEvent) => {\n        const { open } = this.state;\n        if (open) {\n            this.close();\n            this.searchRef.current!.focus();\n        } else {\n            this.search(this.state.search, this.props.values, { open: true });\n            this.searchRef.current!.focus();\n        }\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    public onBodyClick = (event: MouseEvent) => {\n        if (event.target === this.bodyRef.current) {\n            // if the element itself was clicked, (white space inside the body)\n            this.searchRef.current!.focus();\n        }\n    };\n\n    public onFocusIn = (event: FocusEvent) => {\n        this.updateState({ focused: true });\n    };\n\n    public onFocusOut = (event: FocusEvent) => {\n        const receiver = event.relatedTarget as Node;\n        const container = this.containerRef.current!;\n        const dropdown = this.dropdownRef.current!;\n        const focused =\n            container.contains(receiver) || (dropdown && (dropdown === receiver || dropdown.contains(receiver)));\n\n        this.updateState({\n            focused\n        });\n        if (!focused) {\n            this.closeIfOpen();\n        }\n    };\n\n    public onSearchFocus = (event: FocusEvent) => {\n        const { openOnFocus } = this.props;\n        const { open } = this.state;\n        if (!open && openOnFocus) {\n            this.search(this.searchRef.current!.value, this.props.values, { open: true });\n        }\n    };\n\n    public onResultMouseMove = (index: number, event: MouseEvent) => {\n        this.selectSearchResult(index);\n    };\n\n    public toggleValue = (index: number) => {\n        const {\n            values: { selected }\n        } = this.state;\n        const next = selected.slice();\n        next[index] = !next[index];\n        this.updateState({ values: { selected: next, active: index } });\n    };\n\n    public onRemoveSelectedFocus = (event: FocusEvent) => {\n        this.closeIfOpen();\n    };\n\n    public onRemoveSelectedClick = (event: Event) => {\n        const {\n            values: { selected }\n        } = this.state;\n        const { values, onChange } = this.props;\n        const next = values.slice().filter((value, index) => !selected[index]);\n        this.updateState({\n            values: {\n                selected: next.map(v => false)\n            }\n        });\n        onChange(next);\n\n        this.searchRef.current!.focus();\n    };\n\n    public onSearchInput = (event: Event) => {\n        const value = (event.target as HTMLInputElement).value;\n        this.search(value, this.props.values, { open: true });\n    };\n\n    public onSearchKeyDown = (event: KeyboardEvent) => {\n        const { open } = this.state;\n        const searchBoxValue = (event.target as HTMLInputElement).value;\n        const { values } = this.props;\n\n        if (\n            searchBoxValue === '' && //\n            (event.key === Key.Backspace || event.key === Key.Delete) && //\n            values.length > 0\n        ) {\n            this.setState(\n                (prevState: State) => {\n                    const state = extend({}, prevState);\n                    this.applyCloseState(state);\n                    state.values.active = values.length - 1;\n                    return state;\n                },\n                () => {\n                    if (this.valuesRef.current) {\n                        this.valuesRef.current.focus();\n                    }\n                }\n            );\n        }\n\n        if (open) {\n            if (this.handleResultNavigationKeyDown(event)) {\n                return;\n            }\n            if (this.hasSearchResults()) {\n                switch (event.key) {\n                    case Key.Enter:\n                        this.onActiveResultSelectedViaKeypress(event);\n                        break;\n                    case Key.Escape:\n                        if (open) {\n                            this.close();\n                        }\n                        event.preventDefault();\n                        break;\n                }\n            }\n        } else {\n            switch (event.key) {\n                case Key.ArrowDown:\n                case Key.Down:\n                case Key.Enter:\n                    this.search('', this.props.values, { open: true });\n                    break;\n            }\n        }\n    };\n\n    public onValueClick = (index: number) => (event: MouseEvent) => {\n        this.toggleValue(index);\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    public onValuesFocus = (event: Event) => {\n        const {\n            values: { active, selected }\n        } = this.state;\n        const { values } = this.props;\n\n        // highlight the first selected value\n        if (active < 0 && values.length > 0) {\n            let index = 0;\n            for (let i = 0; i < selected.length; i++) {\n                if (selected[i]) {\n                    index = i;\n                    break;\n                }\n            }\n            this.updateState({ values: { active: index } });\n        }\n        this.closeIfOpen();\n    };\n\n    public closeIfOpen() {\n        if (this.state.open) {\n            this.close();\n        }\n    }\n\n    public close = (callback?: () => void) => {\n        this.setState(state => {\n            this.applyCloseState(state);\n            return state;\n        }, callback);\n    };\n\n    private applyCloseState(state: State) {\n        merge(state, [\n            {\n                open: false,\n                results: { results: undefined },\n                search: ''\n            }\n        ]);\n    }\n\n    public onValuesBlur = (event: Event) => {\n        this.updateState({ values: { active: -1 } });\n    };\n\n    public onValuesKeyDown = (event: KeyboardEvent) => {\n        const active = this.state.values.active;\n        const { values } = this.props;\n\n        switch (event.key) {\n            case Key.ArrowLeft:\n            case Key.ArrowUp:\n            case Key.Up:\n            case Key.Left: {\n                if (active > 0) {\n                    this.updateState({ values: { active: active - 1 } });\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.ArrowRight:\n            case Key.Right:\n            case Key.ArrowDown:\n            case Key.Down: {\n                if (active < values.length - 1) {\n                    this.updateState({ values: { active: active + 1 } });\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.PageDown: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.PageUp: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.Home: {\n                this.updateState({ values: { active: 0 } });\n                event.preventDefault();\n                break;\n            }\n            case Key.End: {\n                this.updateState({ values: { active: values.length - 1 } });\n                event.preventDefault();\n                break;\n            }\n            case Key.Space:\n            case Key.Spacebar: {\n                this.toggleValue(active);\n                event.preventDefault();\n                break;\n            }\n            case Key.Backspace:\n            case Key.Delete:\n                this.removeActiveChoice();\n        }\n    };\n\n    private removeActiveChoice() {\n        const { values, onChange } = this.props;\n        const { selected, active } = this.state.values;\n        if (values.length > 0 && active >= 0) {\n            const nextValues = [...values];\n            nextValues.splice(active, 1);\n            const nextSelected = [...selected];\n            nextSelected.splice(active, 1);\n            let nextActive = active - 1;\n            if (nextSelected.length > 0) {\n                nextActive = Math.max(0, nextActive); // if there are items still available select the first\n            }\n            this.updateState(\n                {\n                    values: {\n                        active: nextActive,\n                        selected: nextSelected\n                    }\n                },\n                () => {\n                    if (nextValues.length === 0) {\n                        if (this.searchRef.current != null) {\n                            this.searchRef.current.focus();\n                        }\n                    }\n                    onChange(nextValues);\n                }\n            );\n        }\n    }\n\n    public onDropdownClick = (event: MouseEvent) => {\n        // result clicks do not make it this far because they do not propagate\n        // so this click is on something other than result\n        event.preventDefault();\n        event.stopPropagation();\n        this.searchRef.current!.focus();\n    };\n\n    public onResultClicked = (result: any, event: MouseEvent) => {\n        const { openOnFocus } = this.props;\n        const values = this.selectResult(result);\n\n        const focusSearchLater = () => {\n            window.setTimeout(() => {\n                this.searchRef.current!.focus();\n            }, 0);\n        };\n\n        if (openOnFocus) {\n            this.search('', values, {}, focusSearchLater);\n        } else {\n            this.close(focusSearchLater);\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    public onActiveResultSelectedViaKeypress = (event: KeyboardEvent) => {\n        const { openOnFocus } = this.props;\n        const result = this.getSelectedSearchResult();\n        const values = this.selectResult(result);\n        if (openOnFocus) {\n            this.search('', values, { open: true });\n        } else {\n            this.close();\n        }\n\n        event.preventDefault();\n    };\n\n    public selectResult = (result: any) => {\n        const { values, onChange } = this.props;\n        const next = values.slice();\n        next.push(result);\n\n        const label = this.getItemLabel(result);\n        announce.politely(this.dictionary.valueAdded(label));\n\n        onChange(next);\n        return next;\n    };\n}\n","import { createRef, Fragment, h, RefObject } from 'preact';\nimport {\n    AbstractSelect,\n    DEFAULT_PROPS as ABSTRACT_DEFAULT_PROPS,\n    Props as AbstractSelectProps,\n    State as AbstractSelectState\n} from './abstract-select';\nimport * as announce from './announce';\nimport { Dropdown } from './dropdown';\nimport { Remove, Toggle } from './icons';\nimport { ResultList } from './result-list';\nimport { style } from './style';\nimport { cn, DeepPartial, extend, Key, scope } from './util';\n\nconst forceImportOfH = h;\n\nexport interface Props extends AbstractSelectProps {\n    value: any;\n    label: string;\n    comboboxLabel: string;\n    onChange: (value: any) => void;\n    allowClear?: boolean;\n    placeholder?: string;\n}\n\ninterface State extends AbstractSelectState {\n    value: any;\n}\n\nconst DEFAULT_PROPS = extend({}, ABSTRACT_DEFAULT_PROPS, { allowClear: false });\n\nexport class SingleSelect extends AbstractSelect<Props, State> {\n    private containerRef: RefObject<HTMLElement>;\n    private dropdownRef: RefObject<HTMLElement>;\n    private bodyRef: RefObject<HTMLElement>;\n    private searchRef: RefObject<HTMLInputElement>;\n    private valueRef: RefObject<HTMLElement>;\n\n    public static defaultProps = DEFAULT_PROPS;\n\n    constructor(props) {\n        super(props);\n\n        this.searchRef = createRef();\n        this.bodyRef = createRef();\n        this.containerRef = createRef();\n        this.dropdownRef = createRef();\n        this.valueRef = createRef();\n\n        this.state = extend(this.state, { value: this.props.value });\n    }\n\n    public componentWillMount() {\n        announce.initialize();\n    }\n\n    public render(props, state) {\n        const { minimumCharacters, tabIndex, label, allowClear, placeholder } = props;\n        const { value, open, loading, focused, search, results } = state;\n\n        const classes = cn(\n            this.props.cssClass,\n            style.control,\n            style.single,\n            { [style.open]: open },\n            { [style.focused]: focused }\n        );\n        const resultsDomId = this.namespace + '-results';\n        const optionDomId = this.namespace + '-val';\n        const resultsNamespace = this.namespace + '-res-';\n        const dictionary = this.dictionary;\n        const showPlaceholder = !value && placeholder && placeholder.length > 0;\n        const placeholderDomId = this.namespace + '-placeholder';\n        return (\n            <Fragment>\n                <div\n                    class={classes}\n                    ref={this.containerRef}\n                    onFocusCapture={this.onFocusIn}\n                    onBlurCapture={this.onFocusOut}\n                    tabIndex={-1}\n                    onMouseDown={this.onContainerMouseDown}\n                >\n                    <div class={cn(style.body)} ref={this.bodyRef}>\n                        <div\n                            aria-label={label}\n                            role='listbox'\n                            aria-activedescendant={optionDomId}\n                            aria-expanded='false'\n                            class={cn(style.value)}\n                            tabIndex={tabIndex}\n                            ref={this.valueRef}\n                            onKeyDown={this.onValueKeyDown}\n                            aria-describedby={showPlaceholder ? placeholderDomId : undefined}\n                        >\n                            {value && (\n                                <div\n                                    class={style.item}\n                                    role='option'\n                                    aria-selected='true'\n                                    aria-label={this.getItemLabel(value)}\n                                    aria-setsize={-1}\n                                    aria-posinset={-1}\n                                    id={optionDomId}\n                                >\n                                    <div class={style.content}>{this.renderValue(value)}</div>\n                                </div>\n                            )}\n                            {showPlaceholder && (\n                                <div class={cn(style.placeholder)} id={placeholderDomId}>\n                                    {placeholder}\n                                </div>\n                            )}\n                        </div>\n                        {scope(() => {\n                            const disabled = !value;\n                            const clazz = cn(style.remove, { [style.offscreen]: !allowClear });\n                            return (\n                                <button\n                                    class={clazz}\n                                    onClick={this.onClearClick}\n                                    onFocus={this.onClearFocus}\n                                    onMouseDown={this.onClearMouseDown}\n                                    disabled={disabled}\n                                    aria-disabled={disabled}\n                                    title={dictionary.clearButtonTitle()}\n                                    aria-label={dictionary.clearButtonTitle()}\n                                    type='button'\n                                >\n                                    <span>\n                                        <Remove width={20} height={20} />\n                                    </span>\n                                </button>\n                            );\n                        })}\n                        <div className={style.toggle} aria-hidden={true} title={dictionary.expandButtonTitle()}>\n                            <Toggle height={20} width={20} />\n                        </div>\n                    </div>\n                </div>\n                {open && (\n                    <Dropdown\n                        class={cn(style.dropdown, style.single, this.props.cssClass)}\n                        onMouseDown={this.onDropdownMouseDown}\n                        controlRef={this.containerRef}\n                        dropdownRef={this.dropdownRef}\n                        onFocusOut={this.onFocusOut}\n                        onComponentDidMount={this.focusOnSearch}\n                    >\n                        <div>\n                            <input\n                                type='text'\n                                ref={this.searchRef}\n                                value={search}\n                                class={cn(style.search)}\n                                role='combobox'\n                                aria-autocomplete='list'\n                                aria-haspopup='true'\n                                aria-owns={resultsDomId}\n                                aria-controls={resultsDomId}\n                                aria-expanded={open ? 'true' : 'false'}\n                                aria-activedescendant={\n                                    results.active >= 0 ? resultsNamespace + results.active : undefined\n                                }\n                                aria-busy={loading}\n                                onInput={this.onSearchInput}\n                                onKeyDown={this.onSearchKeyDown}\n                                onFocus={this.onSearchFocus}\n                            />\n                            <ResultList\n                                namespace={resultsNamespace}\n                                minimumCharacters={minimumCharacters}\n                                dictionary={this.dictionary}\n                                itemLabel={this.getItemLabel}\n                                renderItem={this.renderResult}\n                                listboxDomId={resultsDomId}\n                                search={search}\n                                {...this.state.results}\n                                loading={loading}\n                                onResultClicked={this.onResultClicked}\n                                onMouseMove={this.onResultMouseMove}\n                                onLoadMore={this.onLoadMoreResults}\n                            />\n                        </div>\n                    </Dropdown>\n                )}\n            </Fragment>\n        );\n    }\n\n    public componentDidMount() {\n        const css = this.props.containerStyle;\n        if (css && css.length > 0) {\n            this.containerRef.current!.setAttribute('style', css);\n        }\n    }\n\n    private onLoadMoreResults = () => {\n        this.loadMore();\n    };\n\n    public onFocusIn = (event: FocusEvent) => {\n        this.updateState({ focused: true });\n\n        const { openOnFocus } = this.props;\n        const { open } = this.state;\n        if (!open && openOnFocus && this.searchRef.current !== document.activeElement) {\n            this.open();\n        }\n    };\n\n    public onFocusOut = (event: FocusEvent) => {\n        const receiver = event.relatedTarget as Node;\n        const container = this.containerRef.current;\n        const dropdown = this.dropdownRef.current;\n        const search = this.searchRef.current;\n\n        const focused =\n            container.contains(receiver) ||\n            (dropdown && (dropdown === receiver || dropdown.contains(receiver))) ||\n            receiver === search;\n\n        if (this.state.focused !== focused) {\n            this.updateState({\n                focused\n            });\n        }\n        if (!focused) {\n            this.closeIfOpen();\n        }\n    };\n\n    public closeIfOpen() {\n        if (this.state.open) {\n            this.close();\n        }\n    }\n\n    public close = (state?: DeepPartial<State>) => {\n        const control = this;\n        control.valueRef.current!.focus();\n        this.updateState([\n            state,\n            {\n                open: false,\n                results: { results: null },\n                search: ''\n            }\n        ]);\n    };\n\n    private getValueAsArray() {\n        return this.state.value ? [this.state.value] : [];\n    }\n\n    private onContainerMouseDown = (event: MouseEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n        if (this.state.open) {\n            this.close();\n        } else {\n            this.open();\n        }\n    };\n\n    private open(query: string = '') {\n        this.search(query, this.getValueAsArray(), { open: true });\n    }\n\n    private focusOnSearch = () => {\n        this.searchRef.current.focus();\n    };\n\n    private onSearchFocus = (event: FocusEvent) => {\n        this.updateState({ focused: true });\n    };\n\n    private onSearchInput = (event: Event) => {\n        const value = (event.target as HTMLInputElement).value;\n        this.search(value, this.getValueAsArray());\n    };\n\n    private onClearFocus = (event: FocusEvent) => {\n        this.closeIfOpen();\n    };\n\n    private onClearClick = (event: Event) => {\n        this.selectResult(undefined);\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    private onClearMouseDown = (event: Event) => {\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    public onSearchKeyDown = (event: KeyboardEvent) => {\n        if (this.handleResultNavigationKeyDown(event)) {\n            return;\n        }\n\n        const { open } = this.state;\n\n        if (open && this.hasSearchResults) {\n            switch (event.key) {\n                case Key.Enter:\n                    this.selectActiveResult();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    break;\n                case Key.Escape:\n                    this.close();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    break;\n                case Key.Tab:\n                    // TODO select on tab?\n                    this.close();\n                    event.preventDefault();\n                    event.stopPropagation();\n            }\n        }\n    };\n\n    public selectActiveResult = () => {\n        const { active } = this.state.results;\n        if (active >= 0) {\n            this.selectResult(this.getSelectedSearchResult());\n        }\n    };\n\n    public selectResult = (result: any) => {\n        const { onChange } = this.props;\n\n        this.close({ value: result });\n\n        // TODO announce?\n        // const label = this.getItemLabel(result);\n\n        onChange(result);\n    };\n\n    private onValueKeyDown = (event: KeyboardEvent) => {\n        switch (event.key) {\n            case Key.Space:\n            case Key.ArrowDown:\n            case Key.Down:\n                this.open();\n                event.preventDefault();\n                event.stopPropagation();\n                return;\n        }\n\n        if (event.key.length === 1) {\n            // focus on search which will put the printable character into the field\n            this.open();\n        }\n    };\n\n    private onDropdownMouseDown = (event: MouseEvent) => {\n        this.searchRef.current.focus();\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    public onResultMouseMove = (index: number, event: MouseEvent) => {\n        this.selectSearchResult(index);\n    };\n\n    public onResultClicked = (result: any, event: MouseEvent) => {\n        this.selectResult(result);\n        event.preventDefault();\n        event.stopPropagation();\n    };\n}\n","export class Store {\n    private static stores = new WeakMap();\n\n    private store = new Map();\n\n    public get(key: string): any {\n        return this.store.get(key);\n    }\n    public set(key: string, value: any) {\n        this.store.set(key, value);\n    }\n\n    public static getStore(key: any): Store {\n        let store = Store.stores.get(key);\n        if (!store) {\n            store = new Store();\n            Store.stores.set(key, store);\n        }\n        return store;\n    }\n\n    public static hasStore(key: any) {\n        return Store.stores.has(key);\n    }\n\n    public static removeStore(key: any) {\n        Store.stores.delete(key);\n    }\n}\n","/** jsx:pragma h */\nimport { Component, h, render } from 'preact';\nimport { DataItem, DataItemRenderer, QueryFunction } from '../../control/src/abstract-select';\nimport { Dictionary } from '../../control/src/dictionary';\nimport { MultiSelect } from '../../control/src/multi-select';\nimport '../../control/src/select25.scss';\nimport { SingleSelect } from '../../control/src/single-select';\nimport { extend } from '../../control/src/util';\nimport { Ajax, createQueryFromAjax } from './ajax';\nimport { createQueryFromData, DataFunction } from './data';\nimport { Store } from './store';\n\nconst forceImportOfH = h;\n\nenum StoreKeys {\n    targetElement = 'te'\n}\n\ninterface BaseSelectOptions {\n    containerStyle?: string;\n    cssClass?: string;\n    placeholder?: string;\n    tabIndex?: number;\n    valueContent?: DataItemRenderer;\n    resultContent?: DataItemRenderer;\n    query?: QueryFunction;\n    data?: DataFunction;\n    ajax?: Ajax;\n    quiet?: number;\n    minimumCharacters?: number;\n    openOnFocus?: boolean;\n    dictionary?: string | Dictionary;\n}\n\ninterface MultiSelectOptions extends BaseSelectOptions {\n    hiddenValue?: (values: DataItem[], options: MultiSelectOptions) => string;\n    valuesLabel?: string;\n    comboboxLabel?: string;\n    allowDuplicates: boolean;\n    values: DataItem[];\n    maxValues?: number;\n}\n\ninterface SingleSelectOptions extends BaseSelectOptions {\n    hiddenValue?: (value: DataItem, options: SingleSelectOptions) => string;\n    label?: string;\n    value: DataItem;\n    allowClear?: boolean;\n}\n\nconst BASE_DEFAULT_OPTIONS = {\n    dictionary: 'en_us',\n    minimumCharacters: 0,\n    openOnFocus: false\n};\n\nconst DEFAULT_MULTI_SELECT_OPTIONS = extend({}, BASE_DEFAULT_OPTIONS, {\n    hiddenValue: (values: DataItem[], options: MultiSelectOptions) => {\n        if (values && values.length > 0) {\n            return values.map(item => item.id).join(',');\n        } else {\n            return '';\n        }\n    }\n});\n\nconst DEFAULT_SINGLE_SELECT_OPTIONS = extend({}, BASE_DEFAULT_OPTIONS, {\n    allowClear: false,\n    hiddenValue: (value: DataItem, options: SingleSelectOptions) => {\n        if (value) {\n            return value.id;\n        } else {\n            return '';\n        }\n    }\n});\n\nfunction triggerOnChange(element: HTMLElement, data: any) {\n    const event = document.createEvent('HTMLEvents');\n    event.initEvent('change', false, true);\n    event[data] = data;\n    element.dispatchEvent(event);\n}\n\nclass MultiSelectWrapper extends Component<\n    {\n        element: HTMLInputElement;\n        options: MultiSelectOptions;\n    },\n    { values?: DataItem[] }\n> {\n    constructor(props) {\n        super(props);\n        this.state = { values: props.options.values || [] };\n    }\n\n    public componentDidUpdate() {\n        this.setHiddenValue(this.state.values);\n    }\n\n    public componentDidMount() {\n        this.setHiddenValue(this.state.values);\n    }\n\n    public render(props, state, context) {\n        const opts = this.props.options;\n        return (\n            <MultiSelect\n                cssClass={opts.cssClass}\n                containerStyle={opts.containerStyle}\n                placeholder={opts.placeholder}\n                valuesLabel={opts.valuesLabel}\n                comboboxLabel={opts.comboboxLabel}\n                valueContent={opts.valueContent}\n                resultContent={opts.resultContent}\n                query={opts.query}\n                quiet={opts.quiet}\n                minimumCharacters={opts.minimumCharacters}\n                openOnFocus={opts.openOnFocus}\n                dictionary={opts.dictionary}\n                tabIndex={opts.tabIndex}\n                allowDuplicates={opts.allowDuplicates}\n                values={this.state.values}\n                onChange={this.onChange}\n                maxValues={opts.maxValues}\n            />\n        );\n    }\n\n    public onChange = (values: any[]) => {\n        this.setState({ values });\n        this.setHiddenValue(values);\n        triggerOnChange(this.props.element, values);\n    };\n\n    private setHiddenValue(values: any) {\n        const { element, options } = this.props;\n        element.value = options.hiddenValue(values, options);\n    }\n}\n\nclass SingleSelectWrapper extends Component<\n    {\n        options: SingleSelectOptions;\n        element: HTMLInputElement;\n    },\n    { value?: DataItem }\n> {\n    constructor(props) {\n        super(props);\n        this.state = { value: props.options.value };\n    }\n\n    public componentDidMount() {\n        this.setHiddenValue(this.state.value);\n    }\n\n    public componentDidUpdate() {\n        this.setHiddenValue(this.state.value);\n    }\n\n    public render(props, state, context) {\n        const opts = this.props.options;\n        return (\n            <SingleSelect\n                label={opts.label}\n                cssClass={opts.cssClass}\n                containerStyle={opts.containerStyle}\n                allowClear={opts.allowClear}\n                placeholder={opts.placeholder}\n                valueContent={opts.valueContent}\n                resultContent={opts.resultContent}\n                query={opts.query}\n                quiet={opts.quiet}\n                minimumCharacters={opts.minimumCharacters}\n                openOnFocus={opts.openOnFocus} // TODO\n                dictionary={opts.dictionary}\n                tabIndex={opts.tabIndex}\n                value={this.state.value}\n                onChange={this.onChange}\n            />\n        );\n    }\n\n    public onChange = (value: DataItem) => {\n        this.setState({ value });\n        this.setHiddenValue(value);\n        triggerOnChange(this.props.element, value);\n    };\n\n    private setHiddenValue(value: DataItem) {\n        const { element, options } = this.props;\n        element.value = options.hiddenValue(value, options);\n    }\n}\n\nfunction createSingleSelect(element: HTMLInputElement, options: SingleSelectOptions) {\n    options = extend({}, DEFAULT_SINGLE_SELECT_OPTIONS, options);\n    fillBaseOptions(element, options);\n\n    const store = Store.getStore(element);\n\n    // create placeholder element into which the control will be rendered\n    const parentElement = element.parentElement;\n    const targetElement = document.createElement('div');\n    parentElement.insertBefore(targetElement, element);\n    store.set(StoreKeys.targetElement, targetElement);\n\n    render(<SingleSelectWrapper element={element} options={options} />, parentElement, targetElement);\n}\n\nfunction createMultiSelect(element: HTMLInputElement, options: SingleSelectOptions) {\n    options = extend({}, DEFAULT_MULTI_SELECT_OPTIONS, options);\n    fillBaseOptions(element, options);\n\n    const store = Store.getStore(element);\n\n    // create placeholder element into which the control will be rendered\n    const parentElement = element.parentElement;\n    const targetElement = document.createElement('div');\n    parentElement.insertBefore(targetElement, element);\n    store.set(StoreKeys.targetElement, targetElement);\n\n    render(<MultiSelectWrapper element={element} options={options} />, parentElement, targetElement);\n}\n\nfunction fillBaseOptions(element: HTMLInputElement, options: BaseSelectOptions) {\n    if (!options.query) {\n        if (options.ajax) {\n            options.query = createQueryFromAjax(options.ajax);\n        } else if (options.data) {\n            options.query = createQueryFromData(options.data);\n        }\n    }\n\n    if (!options.tabIndex && element.tabIndex) {\n        options.tabIndex = element.tabIndex;\n    }\n\n    if (element.getAttribute('data-s25-container-style')) {\n        let style = options.containerStyle || '';\n        if (style.length > 0) {\n            style += ';';\n        }\n        style += element.getAttribute('data-s25-container-style');\n        options.containerStyle = style;\n    }\n\n    if (element.getAttribute('data-s25-container-class')) {\n        let clazz = options.cssClass || '';\n        if (clazz.length > 0) {\n            clazz += ' ';\n        }\n        clazz += element.getAttribute('data-s25-container-class');\n        options.cssClass = clazz;\n    }\n}\n\nfunction destroy(element: HTMLElement) {\n    if (!Store.hasStore(element)) {\n        return;\n    }\n    const store = Store.getStore(element);\n    const targetElement = store.get(StoreKeys.targetElement);\n    const parentElement = element.parentElement;\n    render(null, parentElement, targetElement);\n    Store.removeStore(element);\n}\n\nconst select25 = {\n    createMultiSelect,\n    createSingleSelect,\n    destroy\n};\n\nexport { select25 };\n\ndeclare global {\n    interface Window {\n        select25: typeof select25;\n    }\n}\n\nwindow.select25 = select25;\n","import { QueryFunction, QueryResult } from '../../control/src/abstract-select';\n\nexport interface DataParam {\n    term: string;\n    page: number;\n    selected: any[];\n}\n\nexport interface DataResult {\n    values: any[];\n    more: boolean;\n}\n\nexport type DataFunction = (param: DataParam) => QueryResult;\n\nexport function createQueryFromData(callback: DataFunction): QueryFunction {\n    return (term: string, page: number, token: string) => {\n        return new Promise((resolve, reject) => {\n            const data = callback({ term, page, selected: [] });\n            resolve({ values: data.values, more: data.more, token });\n        });\n    };\n}\n","import { QueryFunction, QueryResult } from '../../control/src/abstract-select';\nimport { extend } from '../../control/src/util';\n\nexport interface Ajax {\n    url: string;\n    params: (term: string, page: number) => object;\n    process: (data: string) => QueryResult;\n    onerror?: (data?: string, status?: number) => void;\n}\n\nexport function createQueryFromAjax(ajax: Ajax): QueryFunction {\n    ajax = extend({}, ajax, {\n        params(term: string, page: number) {\n            return { term, page };\n        },\n        process(data: string) {\n            const json = JSON.parse(data);\n            return {\n                more: json.more,\n                values: json.values\n            };\n        }\n    });\n\n    return (term: string, page: number, token: string) => {\n        return new Promise((resolve, reject) => {\n            let url = ajax.url;\n            const params = ajax.params(term, page);\n            if (params) {\n                let separator = url.indexOf('?') >= 0 ? '&' : '?';\n                Object.entries(params).forEach(([key, value]) => {\n                    url += separator;\n                    separator = '&';\n                    url += encodeURIComponent(key) + '=' + encodeURIComponent(value);\n                });\n            }\n\n            const request = new XMLHttpRequest();\n            request.open('GET', url, true);\n            request.onload = () => {\n                if (request.status >= 200 && request.status < 400) {\n                    const data = ajax.process(request.responseText);\n                    resolve({ values: data.values, more: data.more, token });\n                } else {\n                    if (ajax.onerror) {\n                        ajax.onerror(request.responseText, request.status);\n                    }\n                    reject();\n                }\n            };\n            request.onerror = () => {\n                if (ajax.onerror) {\n                    ajax.onerror();\n                }\n                reject();\n            };\n            request.send();\n        });\n    };\n}\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","_","label","sent","trys","ops","g","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","u","o","c","l","parentNode","removeChild","h","children","defaultProps","key","ref","type","props","__k","__b","__e","__d","__c","__v","vnode","m","context","w","indexOf","debounceRendering","sort","some","__P","A","__n","ownerSVGElement","T","base","x","isArray","appendChild","nextSibling","insertBefore","D","unmount","current","componentWillUnmount","C","setProperty","test","N","style","cssText","replace","toLowerCase","slice","addEventListener","z","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","contextType","__E","render","E","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","__r","getChildContext","getSnapshotBeforeUpdate","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","checked","$","diffed","H","initialize","live","assertive","polite","getElementById","politely","message","container","node","collection","firstChild","add","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","bind","setTimeout","dictionaries","Map","getDictionary","dict","fallback","get","instance","extend","_i","params","set","noSearchResults","searchResultsLoading","removeButtonTitle","clearButtonTitle","valueAdded","itemLabel","minimumCharactersMessage","len","min","delta","multiSelectInstructions","expandButtonTitle","maximumValuesSelectedMessage","max","Key","merge","target","sources","source","shift","undefined","isMergebleObject","keys","forEach","item","cn","values","classes","values_1","_a","join","counter","uuid","MarkupRenderer","DEFAULT_PROPS","allowDuplicates","minimumCharacters","quiet","tabIndex","Component","AbstractSelect","dictionary","update","callback","token","nextPage","loading","query","page","queryFunc","control","updateState","results","concat","showLoadMoreResults","more","announce.politely","ArrowUp","Up","selectPreviousSearchResult","preventDefault","ArrowDown","Down","selectNextSearchResult","active","index","_super","_this","id","text","renderItem","rendererName","renderer","markup","getItemLabel","selectedValues","start","minimumCharactersReached","showMinimumCharactersError","showNoSearchResultsFound","search","execute","ids_1","Set","getItemId","filter","has","searchTimeout","window","clearTimeout","namespace","focused","open","ContextProvider","Portal","Dropdown","class","className","onClick","onMouseDown","onFocusOut","dropdownRef","scrollParents","el","elementPosition","getComputedStyle","position","parents","parent","parentElement","css","overflow","overflowX","overflowY","ownerDocument","defaultView","getScrollParents","controlRef","throttledPosition","onComponentDidMount","Fragment","rect","getBoundingClientRect","top","height","pageYOffset","left","pageXOffset","width","delay","timeout","Toggle","viewBox","focusable","displayName","Remove","ResultList","overrideError","showMaximumValuesSelectedError","onScroll","searchResults","searchResultsMessage","searchResultsMinimumError","searchResultsMaximumSelectedError","maximumValues","options","role","listboxDomId","getResultDomId","map","onResultClicked","onMouseMove","content","loadMore","prevProps","prevState","drop","scrollTop","offsetTop","offsetHeight","clientHeight","bottom","lastMouseClientX","clientX","lastMouseClientY","clientY","element","onLoadMore","ABSTRACT_DEFAULT_PROPS","MultiSelect","announce.initialize","disabled","activeDescendant","valuesLabel","comboboxLabel","placeholder","maxValues","_c","selected","showPlaceholder","cssClass","multi","instructionsDomId","resultsDomId","resultsNamespace","maxValuesSelected","containerRef","onFocusCapture","onFocusIn","onBlurCapture","focusSearchAndStopPropagation","bodyRef","onBodyClick","offscreen","display","valuesRef","multiValues","onFocus","onValuesFocus","onBlur","onValuesBlur","onKeyDown","onValuesKeyDown","isSelected","isActive","renderValue","stopPropagation","onValueClick","find","remove","onRemoveSelectedClick","onRemoveSelectedFocus","title","htmlFor","searchRef","onInput","onSearchInput","onSearchKeyDown","onSearchFocus","toggle","onToggleClick","dropdown","onDropdownClick","renderResult","onResultMouseMove","onLoadMoreResults","containerStyle","close","nextValues_1","nextSelected","nextActive","onChange","_b","splice","Math","focus","receiver","relatedTarget","contains","closeIfOpen","openOnFocus","selectSearchResult","searchBoxValue","Backspace","Delete","applyCloseState","handleResultNavigationKeyDown","hasSearchResults","Enter","onActiveResultSelectedViaKeypress","Escape","toggleValue","ArrowLeft","Left","ArrowRight","Right","PageDown","PageUp","Home","End","Space","Spacebar","removeActiveChoice","focusSearchLater","selectResult","getSelectedSearchResult","allowClear","SingleSelect","single","optionDomId","placeholderDomId","onContainerMouseDown","valueRef","onValueKeyDown","onClearClick","onClearFocus","onClearMouseDown","onDropdownMouseDown","focusOnSearch","getValueAsArray","activeElement","selectActiveResult","Tab","StoreKeys","Store","store","stores","delete","WeakMap","BASE_DEFAULT_OPTIONS","DEFAULT_MULTI_SELECT_OPTIONS","hiddenValue","DEFAULT_SINGLE_SELECT_OPTIONS","triggerOnChange","createEvent","initEvent","dispatchEvent","MultiSelectWrapper","setHiddenValue","opts","valueContent","resultContent","SingleSelectWrapper","fillBaseOptions","ajax","clazz","term","process","json","JSON","parse","separator_1","url","entries","encodeURIComponent","request","XMLHttpRequest","onload","status","responseText","onerror","send","getAttribute","select25","createMultiSelect","getStore","targetElement","createSingleSelect","destroy","hasStore","removeStore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;qMAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAG5E,IAAIK,EAAW,WAQlB,OAPAA,EAAWZ,OAAOa,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACOhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,IAEKO,MAAMb,KAAMU,YA8BzB,SAASI,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAWD,EAANA,GAAUE,SAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,SAJ1CA,EAIyDK,EAAOL,iBAJ/BN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,MAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUL,MAAME,EAASC,GAAc,KAAKS,UAI/D,SAASM,EAAYhB,EAASiB,GACjC,IAAsGC,EAAGC,EAAG5B,EAAxG6B,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP/B,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOgC,KAAM,GAAIC,IAAK,IACzFC,EAAI,CAAEf,KAAMgB,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAA7D,MAAqF,mBAAXG,SAA0BJ,EAAEI,OAAOC,UAAY,WAAa,OAAO7C,OAAUwC,EACvJ,SAASC,EAAKhC,GAAK,OAAO,SAAUqC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOb,GAAG,IACN,GAAIF,EAAI,EAAGC,IAAM5B,EAAY,EAARyC,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAO5B,EAAI4B,EAAU,SAAM5B,EAAEM,KAAKsB,GAAI,GAAKA,EAAET,SAAWnB,EAAIA,EAAEM,KAAKsB,EAAGa,EAAG,KAAKlB,KAAM,OAAOvB,EAE3J,OADI4B,EAAI,EAAG5B,IAAGyC,EAAK,CAAS,EAARA,EAAG,GAAQzC,EAAEiB,QACzBwB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGzC,EAAIyC,EAAI,MACxB,KAAK,EAAc,OAAXZ,EAAEC,QAAgB,CAAEb,MAAOwB,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGM,EAAEC,QAASF,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKZ,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAkB3C,EAAe,GAA3BA,EAAI6B,EAAEG,MAAY3B,QAAcL,EAAEA,EAAEK,OAAS,MAAkB,IAAVoC,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEZ,EAAI,EAAG,SACjG,GAAc,IAAVY,EAAG,MAAczC,GAAMyC,EAAG,GAAKzC,EAAE,IAAMyC,EAAG,GAAKzC,EAAE,IAAM,CAAE6B,EAAEC,MAAQW,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYZ,EAAEC,MAAQ9B,EAAE,GAAI,CAAE6B,EAAEC,MAAQ9B,EAAE,GAAIA,EAAIyC,EAAI,MAC7D,GAAIzC,GAAK6B,EAAEC,MAAQ9B,EAAE,GAAI,CAAE6B,EAAEC,MAAQ9B,EAAE,GAAI6B,EAAEI,IAAIW,KAAKH,GAAK,MACvDzC,EAAE,IAAI6B,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBF,EAAKf,EAAKpB,KAAKG,EAASoB,GAC1B,MAAOT,GAAKqB,EAAK,CAAC,EAAGrB,GAAIQ,EAAI,UAAeD,EAAI3B,EAAI,EACtD,GAAY,EAARyC,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExB,MAAOwB,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BL,CAAK,CAACf,EAAGqC,MAwEtD,SAASK,IACZ,IAAK,IAAI5C,EAAI,EAAGC,EAAI,EAAG4C,EAAK1C,UAAUC,OAAQH,EAAI4C,EAAI5C,IAAKD,GAAKG,UAAUF,GAAGG,OAC7E,IAAK,IAAI0C,EAAI1D,MAAMY,GAAI+C,EAAI,EAAG9C,EAAI,EAAGA,EAAI4C,EAAI5C,IACzC,IAAK,IAAI+C,EAAI7C,UAAUF,GAAIgD,EAAI,EAAGC,EAAKF,EAAE5C,OAAQ6C,EAAIC,EAAID,IAAKF,IAC1DD,EAAEC,GAAKC,EAAEC,GACjB,OAAOH,MC7JP5C,EAAIiD,EAAElD,EAAEF,EAAE+C,EAAEM,EAAIjC,EAAE,GAAGkC,EAAE,GAAGrD,EAAE,8DAA8D,SAASgD,EAAE9C,EAAEoD,GAAG,IAAI,IAAIH,KAAKG,EAAEpD,EAAEiD,GAAGG,EAAEH,GAAG,OAAOjD,EAAE,SAASqC,EAAErC,GAAG,IAAIoD,EAAEpD,EAAEqD,WAAWD,GAAGA,EAAEE,YAAYtD,GAAG,SAASuD,EAAEvD,EAAEoD,EAAEH,GAAG,IAAIlD,EAAEF,EAAEI,UAAU2C,EAAE,GAAG,IAAI7C,KAAKqD,EAAE,QAAQrD,GAAG,QAAQA,IAAI6C,EAAE7C,GAAGqD,EAAErD,IAAI,GAAoB,EAAjBE,UAAUC,OAAS,IAAI+C,EAAE,CAACA,GAAGlD,EAAE,EAAEA,EAAEE,UAAUC,OAAOH,IAAIkD,EAAER,KAAK5C,EAAEE,IAAI,GAAG,MAAMkD,IAAIL,EAAEY,SAASP,GAAG,mBAAmBjD,GAAG,MAAMA,EAAEyD,aAAa,IAAI1D,KAAKC,EAAEyD,kBAAa,IAASb,EAAE7C,KAAK6C,EAAE7C,GAAGC,EAAEyD,aAAa1D,IAAI,OAAOZ,EAAEa,EAAE4C,EAAEQ,GAAGA,EAAEM,IAAIN,GAAGA,EAAEO,IAAI,MAAM,SAASxE,EAAEiE,EAAEH,EAAElD,EAAEF,EAAE+C,GAAG,IAAIM,EAAE,CAACU,KAAKR,EAAES,MAAMZ,EAAES,IAAI3D,EAAE4D,IAAI9D,EAAEiE,IAAI,KAAKxE,GAAG,KAAKyE,IAAI,EAAEC,IAAI,KAAKC,SAAI,EAAOC,IAAI,KAAK1E,iBAAY,EAAO2E,IAAIvB,GAAG,OAAO,MAAMA,IAAIM,EAAEiB,IAAIjB,GAAGlD,EAAEoE,OAAOpE,EAAEoE,MAAMlB,GAAGA,EAAwB,SAASrE,EAAEmB,GAAG,OAAOA,EAAEwD,SAAS,SAASa,EAAErE,EAAEoD,GAAG7D,KAAKsE,MAAM7D,EAAET,KAAK+E,QAAQlB,EAAE,SAASmB,EAAEvE,EAAEoD,GAAG,GAAG,MAAMA,EAAE,OAAOpD,EAAEV,GAAGiF,EAAEvE,EAAEV,GAAGU,EAAEV,GAAGwE,IAAIU,QAAQxE,GAAG,GAAG,KAAK,IAAI,IAAIiD,EAAEG,EAAEpD,EAAE8D,IAAI5D,OAAOkD,IAAI,GAAG,OAAOH,EAAEjD,EAAE8D,IAAIV,KAAK,MAAMH,EAAEe,IAAI,OAAOf,EAAEe,IAAI,MAAM,mBAAmBhE,EAAE4D,KAAKW,EAAEvE,GAAG,KAA0L,SAAS+B,EAAEqB,KAAKA,EAAEa,MAAMb,EAAEa,KAAI,IAAKhB,EAAER,KAAKW,KAAKrD,KAAK6C,IAAI5C,EAAEyE,sBAAsB7B,EAAE5C,EAAEyE,oBAAoB5E,GAAG6B,GAAG,SAASA,IAAI,IAAI,IAAI1B,EAAED,EAAEkD,EAAE/C,QAAQF,EAAEiD,EAAEyB,KAAK,SAAS1E,EAAEoD,GAAG,OAAOpD,EAAEmE,IAAIJ,IAAIX,EAAEe,IAAIJ,MAAMd,EAAE,GAAGjD,EAAE2E,KAAK,SAAS3E,GAAG,IAAIoD,EAAEH,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAExB,EAAEiE,MAAMf,GAAGN,GAAGQ,EAAEpD,GAAGmE,KAAKH,KAAKxC,EAAE4B,EAAEwB,OAAO3B,EAAE,GAAqBpD,EAAEgF,EAAErD,EAAEoB,GAAvB7C,EAAE+C,EAAE,GAAGF,IAAIuB,IAAIpE,EAAYqD,EAAE0B,SAAI,IAAStD,EAAEuD,gBAAgB,KAAK9B,EAAE,MAAMC,EAAEqB,EAAE3B,GAAGM,GAAG8B,EAAE/B,EAAEL,GAAG/C,GAAGqD,GAA/iB,SAASL,EAAE7C,GAAG,IAAIoD,EAAEH,EAAE,GAAG,OAAOjD,EAAEA,EAAEV,KAAK,MAAMU,EAAEkE,IAAI,CAAC,IAAIlE,EAAEgE,IAAIhE,EAAEkE,IAAIe,KAAK,KAAK7B,EAAE,EAAEA,EAAEpD,EAAE8D,IAAI5D,OAAOkD,IAAI,GAAG,OAAOH,EAAEjD,EAAE8D,IAAIV,KAAK,MAAMH,EAAEe,IAAI,CAAChE,EAAEgE,IAAIhE,EAAEkE,IAAIe,KAAKhC,EAAEe,IAAI,MAAM,OAAOnB,EAAE7C,IAAiY6C,CAAED,OAAO,SAAS9D,EAAEkB,EAAEoD,EAAEH,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAE1B,GAAG,IAAIgD,EAAES,EAAEpE,EAAEsC,EAAE5C,EAAEwF,EAAExB,EAAEd,EAAEkB,GAAGA,EAAEa,KAAKX,EAAEzB,EAAEK,EAAE7B,OAAO,GAAGsB,GAAGP,IAAIO,EAAE,MAAMoB,EAAEA,EAAE,GAAGlB,EAAE6C,EAAEtB,EAAE,GAAG,MAAMH,EAAE,EAAEM,EAAEU,IAAs4B,SAASoB,EAAElF,EAAEoD,EAAEH,GAAG,GAAG,MAAMA,IAAIA,EAAE,IAAI,MAAMjD,GAAG,kBAAkBA,EAAEoD,GAAGH,EAAER,KAAKW,EAAE,YAAY,GAAGlE,MAAMiG,QAAQnF,GAAG,IAAI,IAAID,EAAE,EAAEA,EAAEC,EAAEE,OAAOH,IAAImF,EAAElF,EAAED,GAAGqD,EAAEH,QAAQA,EAAER,KAAKW,EAAEA,EAAE,iBAAiBpD,GAAG,iBAAiBA,EAAEb,EAAE,KAAKa,EAAE,KAAK,KAAKA,GAAG,MAAMA,EAAEgE,KAAK,MAAMhE,EAAEkE,IAAI/E,EAAEa,EAAE4D,KAAK5D,EAAE6D,MAAM7D,EAAE0D,IAAI,KAAK1D,EAAEmE,KAAKnE,GAAGA,GAAG,OAAOiD,EAA7qCiC,CAAE9B,EAAEU,IAAI,SAASb,GAAG,GAAG,MAAMA,EAAE,CAAC,GAAGA,EAAE3D,GAAG8D,EAAEH,EAAEc,IAAIX,EAAEW,IAAI,EAAE,QAAQ5E,EAAE4C,EAAEe,KAAK3D,GAAG8D,EAAES,KAAKvE,EAAEuE,KAAKT,EAAEW,OAAOzE,EAAEyE,KAAK7B,EAAEe,QAAG,OAAY,IAAIS,EAAE,EAAEA,EAAE7B,EAAE6B,IAAI,CAAC,IAAIpE,EAAE4C,EAAEwB,KAAKN,EAAES,KAAKvE,EAAEuE,KAAKT,EAAEW,OAAOzE,EAAEyE,KAAK,CAAC7B,EAAEwB,QAAG,EAAO,MAAMpE,EAAE,KAAK,GAAGsC,EAAEoD,EAAE7E,EAAEiD,EAAE9D,EAAEA,GAAG8B,EAAElB,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAE1B,IAAIyD,EAAEN,EAAEU,MAAMxE,EAAEwE,KAAKJ,IAAQV,EAAJA,GAAM,GAAI1D,EAAEwE,KAAKd,EAAEJ,KAAKtD,EAAEwE,IAAI,KAAKV,GAAGJ,EAAEJ,KAAKc,EAAEN,EAAEiB,KAAKzC,EAAEwB,IAAI,MAAMxB,EAAE,CAAC,IAAI0B,EAAE,GAAG,MAAMkB,IAAIA,EAAE5C,QAAG,IAASwB,EAAEgB,IAAId,EAAEF,EAAEgB,IAAIhB,EAAEgB,SAAI,OAAY,GAAGrB,GAAGzD,GAAGsC,GAAGD,GAAG,MAAMC,EAAE4B,WAAW,CAACrD,EAAE,GAAG,MAAMwB,GAAGA,EAAE6B,aAAarD,EAAEA,EAAEoF,YAAY3D,GAAG0B,EAAE,SAAS,CAAC,IAAItE,EAAE2C,EAAE+B,EAAE,GAAG1E,EAAEA,EAAEwG,cAAc9B,EAAE7B,EAAE6B,GAAG,EAAE,GAAG1E,GAAG4C,EAAE,MAAMzB,EAAEA,EAAEsF,aAAa7D,EAAED,GAAG2B,EAAE3B,EAAE,UAAU4B,EAAEQ,OAAO5D,EAAEc,MAAM,IAAIU,OAAE,IAAS2B,EAAEA,EAAE1B,EAAE4D,YAAY,mBAAmBjC,EAAEQ,OAAOR,EAAEa,IAAIzC,QAAQA,GAAGrC,EAAE6E,KAAKxC,GAAGA,EAAE6B,YAAYrD,IAAIwB,EAAE+C,EAAEpF,IAAI,OAAO2D,IAAIG,IAAIG,EAAEY,IAAIK,EAAE,MAAMzB,GAAG,mBAAmBQ,EAAEQ,KAAK,IAAId,EAAEF,EAAE1C,OAAO4C,KAAK,MAAMF,EAAEE,IAAIT,EAAEO,EAAEE,IAAI,IAAIA,EAAEpB,EAAEoB,KAAK,MAAMf,EAAEe,IAAkkJ,SAASyC,EAAEnC,EAAEH,EAAElD,GAAG,IAAIF,EAAE+C,EAAEM,EAAE,GAAGlD,EAAEwF,SAASxF,EAAEwF,QAAQpC,IAAIvD,EAAEuD,EAAEO,OAAO9D,EAAE4F,SAAS5F,EAAE4F,UAAUrC,EAAEY,KAAKjB,EAAElD,EAAE,KAAKoD,IAAIlD,GAAG,mBAAmBqD,EAAEQ,OAAO7D,EAAE,OAAO6C,EAAEQ,EAAEY,MAAMZ,EAAEY,IAAIZ,EAAEa,SAAI,EAAO,OAAOpE,EAAEuD,EAAEc,KAAK,CAAC,GAAGrE,EAAE6F,qBAAqB,IAAI7F,EAAE6F,uBAAuB,MAAMtC,GAAGpD,EAAEgE,IAAIZ,EAAEH,GAAGpD,EAAEoF,KAAKpF,EAAE+E,IAAI,KAAK,GAAG/E,EAAEuD,EAAEU,IAAI,IAAIZ,EAAE,EAAEA,EAAErD,EAAEK,OAAOgD,IAAIrD,EAAEqD,IAAIqC,EAAE1F,EAAEqD,GAAGD,EAAElD,GAAG,MAAM6C,GAAGP,EAAEO,GAA95J2C,CAAExD,EAAEe,GAAGf,EAAEe,IAAI,GAAGD,EAAE,IAAIC,EAAE,EAAEA,EAAED,EAAE3C,OAAO4C,IAAIC,EAAEF,EAAEC,GAAGD,IAAIC,GAAGD,IAAIC,IAA4gB,SAAS6C,EAAE3F,EAAEoD,EAAEH,GAAG,MAAMG,EAAE,GAAGpD,EAAE4F,YAAYxC,EAAEH,GAAGjD,EAAEoD,GAAG,iBAAiBH,IAAG,IAAKnD,EAAE+F,KAAKzC,GAAGH,EAAE,KAAK,MAAMA,EAAE,GAAGA,EAAE,SAAS6C,EAAE9F,EAAEoD,EAAEH,EAAElD,EAAEF,GAAG,IAAI+C,EAAEM,EAAE1B,EAAEP,EAAEkC,EAAE,GAAGtD,EAAE,cAAcuD,IAAIA,EAAE,SAAS,UAAUA,IAAIA,EAAE,aAAa,UAAUA,EAAE,GAAGR,EAAE5C,EAAE+F,MAAM,iBAAiB9C,EAAEL,EAAEoD,QAAQ/C,MAAM,CAAC,GAAG,iBAAiBlD,IAAI6C,EAAEoD,QAAQ,GAAGjG,EAAE,MAAMA,EAAE,IAAIkB,KAAKlB,EAAEkD,GAAGhC,KAAKgC,GAAG0C,EAAE/C,EAAE3B,EAAE,IAAI,GAAGgC,EAAE,IAAIE,KAAKF,EAAElD,GAAGkD,EAAEE,KAAKpD,EAAEoD,IAAIwC,EAAE/C,EAAEO,EAAEF,EAAEE,QAAQ,MAAMC,EAAE,IAAI,MAAMA,EAAE,IAAIF,EAAEE,KAAKA,EAAEA,EAAE6C,QAAQ,WAAW,KAAuB7C,IAAlB5B,EAAE4B,EAAE8C,iBAAsBlG,EAAEwB,EAAE4B,GAAG+C,MAAM,GAAGlD,GAAGlD,GAAGC,EAAEoG,iBAAiBhD,EAAEiD,EAAEnD,IAAIlD,EAAEoD,IAAIpD,EAAEoD,EAAE,KAAKA,GAAGH,GAAGjD,EAAEsG,oBAAoBlD,EAAEiD,EAAEnD,IAAI,SAASE,GAAG,YAAYA,GAAG,SAASA,GAAG,SAASA,GAAG,SAASA,IAAIvD,GAAGuD,KAAKpD,EAAEA,EAAEoD,GAAG,MAAMH,EAAE,GAAGA,EAAE,mBAAmBA,GAAG,4BAA4BG,IAAIA,KAAKA,EAAEA,EAAE6C,QAAQ,WAAW,KAAK,MAAMhD,IAAG,IAAKA,EAAEjD,EAAEuG,kBAAkB,+BAA+BnD,EAAE8C,eAAelG,EAAEwG,eAAe,+BAA+BpD,EAAE8C,cAAcjD,GAAG,MAAMA,IAAG,IAAKA,IAAI,MAAM4C,KAAKzC,GAAGpD,EAAEyG,gBAAgBrD,GAAGpD,EAAE0G,aAAatD,EAAEH,IAAI,SAASoD,EAAEjD,GAAG7D,KAAK6D,EAAEA,EAAEQ,MAAM5D,EAAE2G,MAAM3G,EAAE2G,MAAMvD,GAAGA,GAAG,SAASyB,EAAEzB,EAAEH,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAEP,EAAEkC,GAAG,IAAIrD,EAAEuC,EAAEkB,EAAEpE,EAAEsC,EAAE8C,EAAE1B,EAAEd,EAAEL,EAAEwD,EAAE1E,EAAEyC,EAAEW,KAAK,QAAG,IAASX,EAAEzD,YAAY,OAAO,MAAMM,EAAEE,EAAE+D,MAAMjE,EAAEmD,GAAG,IAAIjD,EAAE,GAAG,mBAAmBQ,EAAE,CAAC,GAAGuB,EAAEkB,EAAEY,MAAMnC,GAAG5B,EAAEU,EAAEoG,cAAc/G,EAAEC,EAAEoE,KAAKgB,EAAEpF,EAAE4B,EAAEA,EAAEmC,MAAM/C,MAAMhB,EAAER,GAAGO,EAAEE,EAAEmE,IAAIrB,GAAGR,EAAEY,EAAEiB,IAAInE,EAAEmE,KAAK5E,GAAG+C,EAAEwE,KAAK,cAAcrG,GAAGA,EAAEf,UAAUqH,OAAO7D,EAAEiB,IAAI7B,EAAE,IAAI7B,EAAEuB,EAAEmD,IAAIjC,EAAEiB,IAAI7B,EAAE,IAAIgC,EAAEtC,EAAEmD,GAAG7C,EAAE7C,YAAYgB,EAAE6B,EAAEyE,OAAOC,GAAGrF,GAAGA,EAAEsF,IAAI3E,GAAGA,EAAEwB,MAAM9B,EAAEM,EAAE4E,QAAQ5E,EAAE4E,MAAM,IAAI5E,EAAEiC,QAAQY,EAAE7C,EAAEyC,IAAIjF,EAAE0D,EAAElB,EAAE4B,KAAI,EAAG5B,EAAE6E,IAAI,IAAI,MAAM7E,EAAE8E,MAAM9E,EAAE8E,IAAI9E,EAAE4E,OAAO,MAAMzG,EAAE4G,2BAA2B/E,EAAE8E,KAAK9E,EAAE4E,QAAQ5E,EAAE8E,IAAIrE,EAAE,GAAGT,EAAE8E,MAAMrE,EAAET,EAAE8E,IAAI3G,EAAE4G,yBAAyBrF,EAAEM,EAAE8E,OAAOhI,EAAEkD,EAAEwB,MAAMpC,EAAEY,EAAE4E,MAAM1D,EAAE,MAAM/C,EAAE4G,0BAA0B,MAAM/E,EAAEgF,oBAAoBhF,EAAEgF,qBAAqB,MAAMhF,EAAEiF,mBAAmBjF,EAAE6E,IAAIzE,KAAKJ,EAAEiF,uBAAuB,CAAC,GAAG,MAAM9G,EAAE4G,0BAA0BrF,IAAI5C,GAAG,MAAMkD,EAAEkF,2BAA2BlF,EAAEkF,0BAA0BxF,EAAEmD,IAAI7C,EAAE2B,KAAK,MAAM3B,EAAEmF,wBAAuB,IAAKnF,EAAEmF,sBAAsBzF,EAAEM,EAAE8E,IAAIjC,IAAIjC,EAAEkB,MAAMpE,EAAEoE,MAAM9B,EAAE/C,GAAG,CAAC,IAAI+C,EAAEwB,MAAM9B,EAAEM,EAAE4E,MAAM5E,EAAE8E,IAAIlE,EAAEkB,MAAMpE,EAAEoE,MAAM9B,EAAE4B,KAAI,IAAI5B,EAAE8B,IAAIlB,GAAIe,IAAIjE,EAAEiE,IAAIf,EAAEa,IAAI/D,EAAE+D,IAAIzB,EAAE6E,IAAIhH,QAAQsB,EAAEiB,KAAKJ,GAAGvC,EAAE,EAAEA,EAAEmD,EAAEa,IAAI5D,OAAOJ,IAAImD,EAAEa,IAAIhE,KAAKmD,EAAEa,IAAIhE,GAAGR,GAAG2D,GAAG,MAAMjD,EAAE,MAAMqC,EAAEoF,qBAAqBpF,EAAEoF,oBAAoB1F,EAAEM,EAAE8E,IAAIjC,GAAG,MAAM7C,EAAEqF,oBAAoBrF,EAAE6E,IAAIzE,KAAK,WAAWJ,EAAEqF,mBAAmBvI,EAAEsC,EAAE8C,KAAKlC,EAAEiC,QAAQY,EAAE7C,EAAEwB,MAAM9B,EAAEM,EAAE4E,MAAM5E,EAAE8E,KAAKrH,EAAEE,EAAE2H,MAAM7H,EAAEmD,GAAGZ,EAAE4B,KAAI,EAAG5B,EAAE8B,IAAIlB,EAAEZ,EAAEuC,IAAIxB,EAAEtD,EAAEuC,EAAEyE,OAAOzE,EAAEwB,MAAMxB,EAAE4E,MAAM5E,EAAEiC,SAASrB,EAAEa,IAAI,MAAMhE,GAAGA,EAAE8D,MAAM/E,GAAG,MAAMiB,EAAE4D,IAAI5D,EAAE+D,MAAML,SAAStE,MAAMiG,QAAQrF,GAAGA,EAAE,CAACA,GAAG,MAAMuC,EAAEuF,kBAAkB/H,EAAEiD,EAAEA,EAAE,GAAGjD,GAAGwC,EAAEuF,oBAAoBrE,GAAG,MAAMlB,EAAEwF,0BAA0BtD,EAAElC,EAAEwF,wBAAwB1I,EAAEsC,IAAI3C,EAAEsE,EAAEH,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAEP,EAAEkC,GAAGd,EAAE4C,KAAKhC,EAAEe,IAAI3B,EAAE6E,IAAIhH,QAAQsB,EAAEiB,KAAKJ,GAAGQ,IAAIR,EAAEwE,IAAIxE,EAAE/C,GAAG,MAAM+C,EAAE2B,KAAI,OAAQ,MAAMd,GAAGD,EAAEkB,MAAMpE,EAAEoE,KAAKlB,EAAEa,IAAI/D,EAAE+D,IAAIb,EAAEe,IAAIjE,EAAEiE,KAAKf,EAAEe,IAAgO,SAAWhE,EAAEoD,EAAEH,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,GAAG,IAAI1B,EAAEgD,EAAET,EAAEkB,EAAEpE,EAAEsC,EAAEwB,EAAEY,MAAMhF,EAAEuE,EAAES,MAAM,GAAGhE,EAAE,QAAQuD,EAAEQ,MAAM/D,EAAE,MAAM+C,EAAE,IAAI9C,EAAE,EAAEA,EAAE8C,EAAE1C,OAAOJ,IAAI,GAAG,OAAOgD,EAAEF,EAAE9C,OAAO,OAAOsD,EAAEQ,KAAK,IAAId,EAAEgF,SAAShF,EAAEiF,YAAY3E,EAAEQ,OAAO5D,GAAG8C,GAAG,CAAC9C,EAAE8C,EAAEF,EAAE9C,GAAG,KAAK,MAAM,GAAG,MAAME,EAAE,CAAC,GAAG,OAAOoD,EAAEQ,KAAK,OAAOoE,SAASC,eAAepJ,GAAGmB,EAAEH,EAAEmI,SAASE,gBAAgB,6BAA6B9E,EAAEQ,MAAMoE,SAASG,cAAc/E,EAAEQ,KAAK/E,EAAEuJ,IAAI,CAACA,GAAGvJ,EAAEuJ,KAAKxF,EAAE,KAAKpB,GAAE,EAAG,GAAG,OAAO4B,EAAEQ,KAAKnC,IAAI5C,GAAGmB,EAAEqI,MAAMxJ,IAAImB,EAAEqI,KAAKxJ,OAAO,CAAC,GAAG,MAAM+D,IAAIA,EAAEO,EAAEgD,MAAMhG,KAAKH,EAAEsI,aAAajG,GAAGZ,EAAEwB,EAAEY,OAAO5C,GAAGsH,wBAAwBhF,EAAE1E,EAAE0J,yBAAyB/G,EAAE,CAAC,GAAGC,IAAIR,EAAE,IAAIQ,EAAE,GAAGtC,EAAE,EAAEA,EAAEa,EAAEwI,WAAWtI,OAAOf,IAAIsC,EAAEzB,EAAEwI,WAAWrJ,GAAGsJ,MAAMzI,EAAEwI,WAAWrJ,GAAG2B,OAAOyC,GAAGlB,KAAKkB,GAAGlB,GAAGkB,EAAEmF,QAAQrG,EAAEqG,SAAS1I,EAAE2I,UAAUpF,GAAGA,EAAEmF,QAAQ,MAAh3H,SAAW1I,EAAEoD,EAAEH,EAAElD,EAAEF,GAAG,IAAI+C,EAAE,IAAIA,KAAKK,EAAE,aAAaL,GAAG,QAAQA,GAAGA,KAAKQ,GAAG0C,EAAE9F,EAAE4C,EAAE,KAAKK,EAAEL,GAAG7C,GAAG,IAAI6C,KAAKQ,EAAEvD,GAAG,mBAAmBuD,EAAER,IAAI,aAAaA,GAAG,QAAQA,GAAG,UAAUA,GAAG,YAAYA,GAAGK,EAAEL,KAAKQ,EAAER,IAAIkD,EAAE9F,EAAE4C,EAAEQ,EAAER,GAAGK,EAAEL,GAAG7C,IAA6pHS,CAAER,EAAEnB,EAAE4C,EAAE5B,EAAE2B,GAAG+B,EAAEH,EAAEU,IAAI,IAAIV,EAAEU,IAAIV,EAAES,MAAML,SAAS1E,EAAEkB,EAAEoD,EAAEH,EAAElD,EAAE,kBAAkBqD,EAAEQ,MAAM/D,EAAE+C,EAAEM,EAAEjC,EAAEO,IAAIA,IAAI,UAAU3C,QAAG,KAAUiB,EAAEjB,EAAEiC,QAAQhB,IAAIE,EAAEc,OAAOgF,EAAE9F,EAAE,QAAQF,EAAE2B,EAAEX,OAAM,GAAI,YAAYjC,QAAG,KAAUiB,EAAEjB,EAAE+J,UAAU9I,IAAIE,EAAE4I,SAAS9C,EAAE9F,EAAE,UAAUF,EAAE2B,EAAEmH,SAAQ,IAAK,OAAO5I,EAAjsC6I,CAAE9I,EAAEiE,IAAIf,EAAElD,EAAEF,EAAE+C,EAAEM,EAAE1B,EAAE2B,IAAIrD,EAAEE,EAAE8I,SAAShJ,EAAEmD,GAAG,MAAMG,GAAGH,EAAEkB,IAAI,KAAKnE,EAAEgE,IAAIZ,EAAEH,EAAElD,GAAG,OAAOkD,EAAEe,IAAI,SAASgB,EAAE5B,EAAEH,GAAGjD,EAAEkE,KAAKlE,EAAEkE,IAAIjB,EAAEG,GAAGA,EAAEuB,KAAK,SAAS1B,GAAG,IAAIG,EAAEH,EAAEiE,IAAIjE,EAAEiE,IAAI,GAAG9D,EAAEuB,KAAK,SAAS3E,GAAGA,EAAEG,KAAK8C,KAAK,MAAMG,GAAGpD,EAAEgE,IAAIZ,EAAEH,EAAEkB,QAA++B,SAASpB,EAAEK,EAAEH,EAAElD,GAAG,IAAI,mBAAmBqD,EAAEA,EAAEH,GAAGG,EAAEqC,QAAQxC,EAAE,MAAMG,GAAGpD,EAAEgE,IAAIZ,EAAErD,IAAuW,SAASgH,EAAE/G,EAAEoD,EAAEH,GAAG,OAAO1D,KAAKC,YAAYQ,EAAEiD,GAAG,SAAS8F,EAAE3F,EAAEH,EAAElD,GAAG,IAAIF,EAAE+C,EAAEpB,EAAExB,EAAEV,IAAIU,EAAEV,GAAG8D,EAAEH,GAAGL,GAAG/C,EAAEE,IAAImD,GAAG,KAAKnD,GAAGA,EAAE+D,KAAKb,EAAEa,IAAIV,EAAEG,EAAE1E,EAAE,KAAK,CAACuE,IAAI5B,EAAE,GAAGqD,EAAE5B,IAAGpD,GAAIE,GAAFkD,GAAQa,IAAIV,EAAER,GAAG3B,EAAEA,OAAE,IAASgC,EAAE8B,gBAAgBhF,IAAIF,EAAE,CAACE,GAAG6C,EAAE,KAAKO,EAAEgD,MAAMhG,KAAK8C,EAAEqF,YAAY9G,EAAEzB,GAAGkB,EAAEpB,GAAGmF,EAAExD,EAAE4B,YCAnnP4F,IACZ,IAIMC,EAKAC,EAOAC,EAhBFnB,SAASoB,eAAe,eAItBH,EAAOjB,SAASG,cAAc,QAC/BzB,aAAa,KAAM,YACxBuC,EAAKvC,aAAa,QAAS,0BAC3BsB,SAASzG,KAAK6D,YAAY6D,IAEpBC,EAAYlB,SAASG,cAAc,QAC/BzB,aAAa,KAAM,sBAC7BwC,EAAUxC,aAAa,OAAQ,OAC/BwC,EAAUxC,aAAa,YAAa,aACpCwC,EAAUxC,aAAa,gBAAiB,aACxCuC,EAAK7D,YAAY8D,IAEXC,EAASnB,SAASG,cAAc,QAC/BzB,aAAa,KAAM,mBAC1ByC,EAAOzC,aAAa,OAAQ,OAC5ByC,EAAOzC,aAAa,YAAa,UACjCyC,EAAOzC,aAAa,gBAAiB,aACrCuC,EAAK7D,YAAY+D,aAOLE,EAASC,IAIzB,SAAaA,EAAiBC,GAC1B,IAAMC,EAAOxB,SAASG,cAAc,OACpCqB,EAAKpE,YAAY4C,SAASC,eAAeqB,IACzCC,EAAUnE,YAAYoE,GAItB,IAAIC,EAAazB,SAASoB,eAAe,sBACzC,KAAOK,EAAWC,YAAcD,EAAWC,aAAeF,GACtDC,EAAWnG,YAAYmG,EAAWC,YAEtCD,EAAazB,SAASoB,eAAe,mBACrC,KAAOK,EAAWC,YAAcD,EAAWC,aAAeF,GACtDC,EAAWnG,YAAYmG,EAAWC,YAhBtCC,CAAIL,EAAStB,SAASoB,eAAe,oBD9B6lPpJ,EAA+uB,CAACgE,IAAI,SAAShE,EAAEoD,GAAG,IAAI,IAAIH,EAAElD,EAAEqD,EAAEA,EAAE9D,IAAI,IAAI2D,EAAEG,EAAEc,OAAOjB,EAAE3D,GAAG,IAAI,GAAG2D,EAAEzD,aAAa,MAAMyD,EAAEzD,YAAYoK,2BAA2B7J,GAAE,EAAGkD,EAAE4G,SAAS5G,EAAEzD,YAAYoK,yBAAyB5J,KAAK,MAAMiD,EAAE6G,oBAAoB/J,GAAE,EAAGkD,EAAE6G,kBAAkB9J,IAAID,EAAE,OAAOgC,EAAEkB,EAAE4D,IAAI5D,GAAG,MAAMG,GAAGpD,EAAEoD,EAAE,MAAMpD,IAAIqE,EAAwD5E,UAAUoK,SAAS,SAAS7J,EAAEoD,GAAG,IAAMH,EAAE1D,KAAK4H,MAAM5H,KAAK0H,MAAM1H,KAAK4H,IAAI5H,KAAK4H,IAAIrE,EAAE,GAAGvD,KAAK0H,OAAO,mBAAmBjH,IAAIA,EAAEA,EAAEiD,EAAE1D,KAAKsE,QAAQ7D,GAAG8C,EAAEG,EAAEjD,GAAG,MAAMA,GAAGT,KAAK4E,MAAMf,GAAG7D,KAAK2H,IAAIzE,KAAKW,GAAGrB,EAAExC,QAAQ8E,EAAE5E,UAAUsK,YAAY,SAAS/J,GAAGT,KAAK4E,MAAM5E,KAAKyE,KAAI,EAAGhE,GAAGT,KAAK2H,IAAIzE,KAAKzC,GAAG+B,EAAExC,QAAQ8E,EAAE5E,UAAUqH,OAAOjI,EAAEoE,EAAE,GAAGlD,EAAE,EAAEF,EAAE,mBAAmBa,QAAQA,QAAQjB,UAAU4B,KAAK2I,KAAKtJ,QAAQC,WAAWsJ,WAAW/G,EAAEjC,EEarmS,IAsCMiJ,EAAe,IAAIC,aAGTC,EAAcC,GAC1B,IAAMC,EAAuBJ,EAAaK,IAAI,SAE9C,IAAKF,EACD,OAAOC,EAGX,GAAoB,iBAATD,EAIP,OAAOA,EAHP,IAAMG,EAAWN,EAAaK,IAAIF,GAClC,OAAOG,GAAsBF,WC7DrBG,SAAO,aAAAC,mBAAAA,IAAAC,kBACnB,IAAK,IAAI5K,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAClC,IAAK,IAAM2D,KAAOzD,UAAUF,GACpBE,UAAUF,GAAGX,eAAesE,KACK,mBAATA,IAAkD,iBAAtBzD,UAAUF,GAAG2D,GAC7D+G,IAAoB/G,GAAMzD,UAAUF,GAAG2D,MAE1BA,GAAOzD,UAAUF,GAAG2D,IAKjD,SDsCJwG,EAAaU,IAAI,QAvCS,CACtBC,2BACI,MAAO,wBAGXC,gCACI,MAAO,cAGXC,6BACI,MAAO,0BAGXC,4BACI,MAAO,mBAGXC,WAAA,SAAWC,GACP,OAAOA,EAAY,UAGvBC,yBAAA,SAAyBC,EAAaC,GAClC,IAAMC,EAAQD,EAAMD,EACpB,MAAO,gBAAkBE,EAAQ,mBAA6B,EAARA,EAAY,IAAM,KAG5EC,wBAAA,WACI,MAAO,4KAGXC,kBAAA,WACI,MAAO,UAEXC,6BAAA,SAA6BC,GACzB,MAAO,+CCtBR,IAoDKC,EAAAA,EApDCC,EAAQ,SAAIC,EAAWC,GAChC,IAAKA,EAAQ5L,OACT,OAAO2L,EAEX,IAAME,EAASD,EAAQE,QACvB,YAAeC,IAAXF,GAIAG,EAAiBL,IAAWK,EAAiBH,IAC7ChN,OAAOoN,KAAKJ,GAAQK,QAAQ,SAAC1I,GACrBwI,EAAiBH,EAAOrI,KACnBmI,EAAOnI,KACRmI,EAAOnI,GAAO,IAElBkI,EAAMC,EAAOnI,GAAM,CAACqI,EAAOrI,MAE3BmI,EAAOnI,GAAOqI,EAAOrI,KAXtBkI,EAAMC,EAAQC,IAuBvBI,EAAmB,SAACG,GACtB,OAJgB,QADFA,EAKEA,IAJwB,iBAATA,IAILnN,MAAMiG,QAAQkH,GAL3B,IAACA,YAQFC,QAAG,aAAA5B,mBAAAA,IAAA6B,kBAIf,IAHA,IAAMC,EAAoB,GACpBpN,EAAiB,GAAGA,mBAENqN,IAAAC,WAAAA,IAAQ,CAAvB,IAAM5L,OACP,GAAqB,iBAAVA,GAAqC,EAAfA,EAAMZ,OACnCsM,EAAQ/J,KAAK3B,QACV,GAAqB,iBAAVA,EACd,IAAK,IAAM4C,KAAO5C,EACV1B,EAAee,KAAKW,EAAO4C,IAAQ5C,EAAM4C,IACzC8I,EAAQ/J,KAAKiB,GAM7B,OAAO8I,EAAQG,KAAK,MAGZhB,EAAAA,EAAAA,6BAGRA,oBACAA,wBACAA,0BACAA,YACAA,gBACAA,YACAA,cACAA,YACAA,kBACAA,sBACAA,wBACAA,kBACAA,gBACAA,kBAEAA,cACAA,UACAA,sBACAA,cACAA,gBAGG,IACCiB,EADKC,EAEF,WAAM,MAAA,OAASD,KChD1B,SAASE,EAAeJ,GACpB,OAAOnJ,SAAKgF,wBAAyB,CAAEG,uBAGpC,MAAMqE,EAAgC,CACzCC,iBAAiB,EACjBC,kBDyCIL,EAAU,ECxCdM,MAAO,GACPC,SAAU,MAGiE9N,MAAA+N,GA8D3ErO,sBAAIsO,8BAAJ,WACI,IAAMhD,EAAO9K,KAAKsE,MAAMyJ,WACxB,OAAIjD,EACoB,iBAATA,EACAD,EAAcC,GAEdA,EAGJD,qCAILiD,wBAAV,SAAsBE,EAAgDC,GAClE,IAAMvG,EAAQ2E,EAAMrM,KAAK0H,MAAO/H,MAAMiG,QAAQoI,GAAUA,EAAS,CAACA,IAClEhO,KAAKsK,SAAS5C,EAAOuG,IA8FlBH,qBAAP,WAAA,IAcUI,EACAC,SAdAhB,EAIFnN,KAAK0H,MAHL0G,YACQC,WACGC,iBAETxD,EAAO9K,KAAK+N,WACHQ,EAAcvO,KAAKsE,YAC5BkK,EAAUxO,KAEZoO,IAIEF,EAAQZ,IACRa,EAAWG,EAAO,EAExBtO,KAAKyO,YAED,CACIL,SAAS,EACTM,QAAS,CACLR,UAGR,wGAKuB,gCAAMK,EAAUF,EAAOF,EAAUD,WAIhD,OAJMtM,EAASuL,SAETjH,EAAUsI,EAAQ9G,MAAMgH,QAE1B9M,EAAOsM,QAAUhI,EAAQgI,WAKzBtM,EAAOoL,QAAiC,EAAvBpL,EAAOoL,OAAOrM,OAE/B6N,EAAQC,YAAY,CAChBL,SAAS,EACTM,QAAS,CACLJ,KAAMH,EACNO,QAASxI,EAAQwI,QAAQC,OAAO/M,EAAOoL,QACvC4B,oBAAqBhN,EAAOiN,SAIpCC,EAAkBhE,EAAKQ,mBAEvBkD,EAAQC,YAAY,CAChBL,SAAS,EACTM,QAAS,CACLE,qBAAqB,oCAMjCJ,EAAQC,YAAY,CAAEL,SAAS,oCAMrCN,0CAAV,SAAwC1G,GACpC,OAAQA,EAAMjD,KACV,KAAKiI,EAAI2C,QACT,KAAK3C,EAAI4C,GAGL,OAFAhP,KAAKiP,6BACL7H,EAAM8H,kBACC,EACX,KAAK9C,EAAI+C,UACT,KAAK/C,EAAIgD,KAGL,OAFApP,KAAKqP,yBACLjI,EAAM8H,kBACC,EAEf,OAAO,GAGDpB,mCAAV,WACU,IAAAX,EAAsBnN,KAAK0H,MAAMgH,QAA/BY,WAAQZ,YACZA,GAAWY,EAASZ,EAAQ/N,OAAS,GAErCX,KAAKyO,YAAY,CAAEC,QAAS,CAAEY,OAAQA,EAAS,MAI7CxB,uCAAV,WACY,IAAAwB,EAAWtP,KAAK0H,MAAMgH,eACjB,EAATY,GAEAtP,KAAKyO,YAAY,CAAEC,QAAS,CAAEY,OAAQA,EAAS,MAI7CxB,oCAAV,WACU,IAAAX,EAAsBnN,KAAK0H,MAAMgH,QACvC,4BAGMZ,+BAAV,SAA6ByB,GACNvP,KAAK0H,MAAMgH,iBACfa,GAEXvP,KAAKyO,YAAY,CAAEC,QAAS,CAAEY,OAAQC,MAIpCzB,6BAAV,WACI,IAAMY,EAAU1O,KAAK0H,MAAMgH,QAAQA,QACnC,OAAOA,GAA4B,EAAjBA,EAAQ/N,WAzR9B,WAAY2D,GAAZ,MACIkL,YAAMlL,gBAsBHmL,YAAY,SAAC3C,GAChB,OAAOA,EAAK4C,IAGTD,eAAe,SAAC3C,GACLA,EAAK6C,KACnB,OAAO7C,EAAK6C,MAGTF,cAAc,SAAC3C,GAClB,OAAO2C,EAAKG,WAAW9C,EAAM,iBAG1B2C,eAAe,SAAC3C,GACnB,OAAO2C,EAAKG,WAAW9C,EAAM,kBAGzB2C,aAAa,SAAC3C,EAAgB+C,GAClC,IAAMC,EAAWL,EAAKnL,MAAMuL,GAC5B,GAAIC,EAAU,CACV,GAAwB,mBAAbA,EAQP,OAAO9L,EAACuJ,GAAewC,OAAQjD,EAAKgD,KAPpC,IAAMvI,EAASuI,EAAShD,EAAMlE,GAC9B,MAAsB,iBAAXrB,EACAvD,EAACuJ,GAAewC,OAAQxI,IAExBA,EAMf,OAAOvD,EAACuJ,GAAewC,OAAQN,EAAKO,aAAalD,MAsBlD2C,SAAS,SAACpB,EAAO4B,EAAgBC,EAAwBjC,GAC5D,IAAMF,EAAa0B,EAAK1B,WAClBZ,EAAkEsC,EAAKnL,MAArEoJ,sBAAmBD,oBAAiBE,UAAcY,UAIpD4B,GAFUV,EAAK/H,MAAMgH,QAEML,EAAM1N,SAAW+M,GAAmB,IAC/DQ,EAAQiC,EAA2B7C,SAASZ,EAE5C8B,EAAUiB,EAEhBA,EAAKhB,YAED,CACIyB,EACA,CACI9B,QAAS+B,EACTzB,QAAS,CACLY,QAAS,EACThB,KAAM,EACNI,aAAShC,EACTkC,qBAAqB,EACrBwB,4BAA6BD,EAC7BE,0BAA0B,EAC1BnC,SAEJoC,OAAQjC,IAGhB,WAKI,IASMkC,EAbFtC,GACAA,IAGCkC,GASCI,EAAU,0GAEO,gCAAMhC,EAAUF,EAAO,EAAGH,WACzC,OADMtM,EAASuL,UACJe,QAAUM,EAAQ9G,MAAMgH,QAAQR,WAKvClB,EAASpL,EAAOoL,QAAU,IACzBS,GAAmC,EAAhBT,EAAOrM,QAAsC,EAAxBsP,EAAetP,SAClD6P,EAAM,IAAIC,IAChBR,EAAepD,QAAQ,SAAA/J,GAAK,OAAA0N,EAAIpG,IAAIoE,EAAQkC,UAAU5N,MACtDkK,EAASA,EAAO2D,OAAO,SAAA7N,GAAK,OAAC0N,EAAII,IAAIpC,EAAQkC,UAAU5N,OAGvDkK,EAAOrM,OAAS,GAChBmO,EAAkBf,EAAWzC,mBAIjCkD,EAAQC,YAAY,CAChBL,SAAS,EACTM,QAAS,CACLY,OAAwB,EAAhBtC,EAAOrM,OAAa,GAAK,EACjC2N,KAAM,EACNI,QAAS1B,EACT4B,oBAAqBhN,EAAOiN,KAC5BwB,yBAA0BrD,EAAOrM,OAAS,mCAKlD6N,EAAQC,YAAY,CAAEL,SAAS,iCAInCT,GAAiB,EAARA,GACLa,EAAQqC,eACRC,OAAOC,aAAavC,EAAQqC,eAEhCrC,EAAQqC,cAAgBC,OAAOpG,WAAW6F,EAAS5C,IAEnD4C,KAjDAzB,EAAkBf,EAAWnC,yBAAyByC,EAAM1N,OAAQ+M,OA9GhF+B,EAAKoB,mBAAgBnE,EACrB+C,EAAKuB,UAAY1D,IAEjBmC,EAAK/H,MAAQ,CACTuJ,SAAS,EACT7C,SAAS,EACT8C,MAAM,EACNxC,QAAS,CACLY,QAAS,EACThB,KAAM,EACNI,aAAShC,EACTwB,MAAO,KAEPU,qBAAqB,EACrBwB,4BAA4B,EAC5BC,0BAA0B,GAE9BC,OAAQ,MCvFpB,SAA8BxQ,MAAA+N,GACnBsD,4BAAP,WACI,OAAOnR,KAAKsE,MAAMS,SAEfoM,mBAAP,WACI,OAAOnR,KAAKsE,MAAML,aAL1B,4DASA,SAASmN,GAAOjE,OAAEtI,UAAOmF,cAIrB,OADAzC,EADavD,EAACmN,GAAgBpM,QAAS/E,KAAK+E,SAAUF,GACzCmF,GACN,KAiBX,WAA8BlK,QAAA+N,GAUnBwD,gCAAP,WACIrR,KAAKgK,UAAYvB,SAASG,cAAc,OACpC5I,KAAKsE,MAAMgN,QACXtR,KAAKgK,UAAUuH,UAAYvR,KAAKsE,MAAMgN,OAO1CtR,KAAKgK,UAAU4D,UAAY,EACvB5N,KAAKsE,MAAMkN,SACXxR,KAAKgK,UAAUnD,iBAAiB,QAAS7G,KAAKsE,MAAMkN,SAEpDxR,KAAKsE,MAAMmN,aACXzR,KAAKgK,UAAUnD,iBAAiB,YAAa7G,KAAKsE,MAAMmN,aAExDzR,KAAKsE,MAAMoN,YACX1R,KAAKgK,UAAUnD,iBAAiB,WAAY7G,KAAKsE,MAAMoN,YAE3DjJ,SAASzG,KAAK6D,YAAY7F,KAAKgK,YAG5BqH,+BAAP,WAAA,WACIrR,KAAKsE,MAAMqN,YAAYzL,QAAUlG,KAAKgK,UACtChK,KAAK4R,uBF2EoBC,GAC7B,IACMC,EADQhB,OAAOiB,iBAAiBF,GACRG,SAC9B,GAAwB,UAApBF,EACA,MAAO,CAACD,GAMZ,IAHA,IAAMI,EAAuC,GACzCC,EAASL,EAAGM,cAETD,GAA8B,IAApBA,EAAO3J,UAAgB,CACpC,IAAM6J,EAAMtB,OAAOiB,iBAAiBG,GAChC,wBAAwB5L,KAAK8L,EAAIC,SAAW,IAAMD,EAAIE,UAAY,IAAMF,EAAIG,aACpD,aAApBT,GAAmG,GAAjE,CAAC,WAAY,QAAS,YAAY7M,QAAQmN,EAAIJ,UAAY,MAC5FC,EAAQ/O,KAAKgP,GAGrBA,EAASA,EAAOC,cAapB,OAVIN,EAAGW,eACHP,EAAQ/O,KAAK2O,EAAGW,cAAcxQ,MAI9B6P,EAAGW,gBAAkB/J,UAAYoJ,EAAGW,eAAiBX,EAAGW,cAAcC,aACtER,EAAQ/O,KAAK2O,EAAGW,cAAcC,aAGlCR,EAAQ/O,KAAK4N,QACNmB,EEzGkBS,CAAiB1S,KAAKsE,MAAMqO,WAAWzM,SAC5DlG,KAAK4R,cAAc/E,QAAQ,SAAAqF,GACvB,CAAC,SAAU,SAAU,aAAarF,QAAQ,SAAAzF,GACtC8K,EAAOrL,iBAAiBO,EAAOqI,EAAKmD,uBAG5C5S,KAAKgS,WAEDhS,KAAKsE,MAAMuO,qBACX7S,KAAKsE,MAAMuO,uBAIZxB,kCAAP,WAAA,WACQrR,KAAK4R,gBACL5R,KAAK4R,cAAc/E,QAAQ,SAAAqF,GACvB,CAAC,SAAU,SAAU,aAAarF,QAAQ,SAAAzF,GACtC8K,EAAOnL,oBAAoBK,EAAOqI,EAAKmD,8BAGxC5S,KAAK4R,cACZ5R,KAAK4R,mBAAgBlF,GAGzB1M,KAAKsE,MAAMqN,YAAYzL,aAAUwG,EACjC1M,KAAKgK,UAAWmI,cAAepO,YAAY/D,KAAKgK,YAG7CqH,gCAAP,WACIrR,KAAKgS,YAGFX,oBAAP,SAAc/M,GACV,OAlFcO,EAkFMb,EAAC8O,OAAU9S,KAAKsE,MAAML,UAlFrB+F,EAkF2ChK,KAAKgK,UAjFlEhG,EAAEoN,GAAQ,CAAEvM,QAAOmF,cAD9B,IAAsBnF,EAAOmF,GAqFjBqH,sBAAR,WACI,IACM0B,EADU/S,KAAKsE,MAAMqO,WAAWzM,QACjB8M,wBACfxM,EAAQ,SAAQuM,EAAKE,IAAMF,EAAKG,OAASpC,OAAOqC,wCAC1CJ,EAAKK,KAAOtC,OAAOuC,wCAClBN,EAAKO,YAClBtT,KAAKgK,UAAW7C,aAAa,QAASX,QAxE1C,YAAYlC,GAAZ,IFqEqBiP,EAAetF,EAChCuF,IErEAhE,aAAMlL,gBACNmL,EAAKmD,mBFmEYW,EEnEiB,GFmEFtF,EEnEMwB,EAAKuC,SAASvH,KAAKgF,GFqEtD,WAGC+D,OAFY9G,IAAZ8G,OACA1C,OAAOC,aAAayC,GAGV1C,OAAOpG,WAAW,WACxBuD,IACAuF,OAAU9G,GACX6G,OG5GiC,SAAnCE,GAAoCtG,OAAE+F,WAAQI,UAEvD,OACItP,SAAKkP,OAAQA,EAAQI,MAAOA,EAAOI,QAFvB,OAASJ,EAAQ,IAAMJ,EAEkBtF,UAAW,EAAG+F,UAAU,SACzE3P,UAAM1E,EAAE,2RAIpBmU,GAAOG,YAAc,SAE2B,SAAnCC,GAAoC1G,OAAEmG,UAAOJ,WAEtD,OACIlP,SAAKkP,OAAQA,EAAQI,MAAOA,EAAOI,QAFvB,OAASJ,EAAQ,IAAMJ,EAEkBtF,UAAW,EAAG+F,UAAU,SACzE3P,UAAM1E,EAAE,gWAJb,ICnBWkH,GAAAA,GD2BlBqN,GAAOD,YAAc,UC3BHpN,GAAAA,GAAAA,8BAEdA,yBACAA,uBACAA,qBACAA,mBACAA,yBACAA,uBACAA,mBACAA,kCACAA,qBACAA,mBACAA,2BACAA,uBACAA,uBACAA,mBACAA,qBACAA,uBACAA,6BACAA,0CACAA,2BACAA,sCACAA,yBACAA,2CACAA,qDACAA,qDACAA,gEACAA,iFACAA,4CACAA,uBACAA,iCACAA,uBCOJ,WAAgC1G,QAAA+N,GAWpBiG,4BAAR,SAAuBvE,GACnB,OAAOvP,KAAKsE,MAAM0M,UAAYzB,GAG3BuE,oBAAP,SAAcxP,EAAOoD,EAAO3C,GAA5B,WACYgJ,EAAgEzJ,aAApDoJ,EAAoDpJ,oBAAjCsK,EAAiCtK,sBAAZoK,EAAYpK,UAClE+J,EAAQrO,KAAKsE,MAAMgM,OAEnByD,EAAgBzP,EAAM0P,+BAE5B,OACIhQ,SAAKsN,MAAO9K,GAAMxE,MACdgC,SACII,IAAKpE,KAAKgK,UACViK,SAAUjU,KAAKiU,SACf3C,MAAO9K,GAAM0N,0BACF5P,EAAM8J,UAEf2F,GAAiBzP,EAAM8J,SACrBpK,SAAKsN,MAAOvE,EAAGvG,GAAM+E,qBAAsB/E,GAAM2N,uBAC5CpG,EAAWxC,yBAGlBwI,GAAiBzP,EAAM+L,0BACrBrM,SAAKsN,MAAOvE,EAAGvG,GAAM8E,gBAAiB9E,GAAM2N,uBACvCpG,EAAWzC,oBAGlByI,GAAiBzP,EAAM8L,4BACrBpM,SAAKsN,MAAOvE,EAAGvG,GAAM4N,0BAA2B5N,GAAM2N,uBACjDpG,EAAWnC,yBAAyByC,EAAM1N,OAAQ+M,IAG1DpJ,EAAM0P,gCACHhQ,SAAKsN,MAAOvE,EAAGvG,GAAM6N,kCAAmC7N,GAAM2N,uBACzDpG,EAAW7B,6BAA6B5H,EAAMgQ,iBAGrDP,GAAiBrF,GAA4B,EAAjBA,EAAQ/N,QAClCqD,SACIsN,MAAO9K,GAAM+N,QACbC,KAAK,UACL9E,GAAIpL,EAAMmQ,qCAC6B,GAAhBnQ,EAAMgL,OAActP,KAAK0U,eAAepQ,EAAMgL,aAAU5C,GAE9EgC,EAAQiG,IAAI,SAAC/S,EAAQ2N,SACZnN,EAAQkC,EAAMqH,UAAU/J,GACxB2F,EAASjD,EAAMsL,WAAWhO,GAC1B0N,EAAShL,EAAMgL,SAAWC,EAC1B6C,EAAMrF,EAAGvG,GAAMsG,aAChBtG,GAAM8I,QAASA,MAGpB,OACItL,SACI0L,GAHGD,EAAKiF,eAAenF,GAIvB+B,MAAOc,EACPoC,KAAK,SACLhD,QAAS/B,EAAKmF,gBAAgBhT,GAC9BiT,YAAapF,EAAKoF,YAAYtF,mBACfA,EAAQ,iBACTX,EAAsBF,EAAQ/N,OAAS,EAAI+N,EAAQ/N,uBAClD2O,eACHlN,GAEZ4B,SAAKsN,MAAO9K,GAAMsO,SAAUvN,OAM/CjD,EAAMsK,qBACH5K,SACII,IAAKpE,KAAK+U,SACVzD,MAAOvE,EAAGvG,GAAM4N,0BAA2B5N,GAAM2N,uBAEhDpG,EAAWxC,2BAqC7BuI,gCAAP,SAA0BkB,EAAkBC,GAClC,IAeQvF,EACAmC,EAEIqD,EACAtR,EACAlC,EAQIqK,EA5BhBoB,EAA2CnN,KAAKsE,MAA9CgL,WAAQZ,YAASE,wBAGrBU,IAF2B0F,WAGb,GAAV1F,GAAeZ,GAA4B,EAAjBA,EAAQ/N,QAAc2O,IAAWZ,EAAQ/N,OAAS,GAAKiO,GAG3EsG,EAAOlV,KAAKgK,UAAU9D,QACtB2L,EAAK7R,KAAK+U,SAAS7O,QAEzBgP,EAAKC,UAAYtD,EAAGuD,UAAYvD,EAAGwD,aAAeH,EAAKI,cAGtC,GAAVhG,IAEDI,EAAK1P,KAAK0U,eAAepF,GAErB,OADJuC,EAAKpJ,SAASoB,eAAe6F,MAGzB9L,GADAsR,EAAOlV,KAAKgK,UAAW9D,SACd8M,yBACTtR,EAAImQ,EAAGmB,yBAEPC,IAAMrP,EAAEqP,KAAOvR,EAAE6T,QAAU3R,EAAE2R,SACzBxJ,EAAQnI,EAAEqP,IAAMvR,EAAEuR,IACxBiC,EAAKC,UAAYD,EAAKC,UAAYpJ,GAGlCrK,EAAEuR,KAAOrP,EAAEqP,KAAOvR,EAAE6T,OAAS3R,EAAE2R,SACzBxJ,EAAQrK,EAAE6T,OAAS3R,EAAE2R,OAC3BL,EAAKC,UAAYD,EAAKC,UAAYpJ,WArJtD,YAAYzH,GAAZ,MACIkL,aAAMlL,gBAyFFmL,kBAAkB,SAAC7N,GAAgB,OAAA,SAACwF,GACxCqI,EAAKnL,MAAMsQ,gBAAgBhT,EAAQwF,KAG/BqI,cAAc,SAACF,GAAkB,OAAA,SAACnI,GAClCqI,EAAK+F,mBAAqBpO,EAAMqO,SAAWhG,EAAKiG,mBAAqBtO,EAAMuO,UAK/ElG,EAAK+F,iBAAmBpO,EAAMqO,QAC9BhG,EAAKiG,iBAAmBtO,EAAMuO,QAE9BlG,EAAKnL,MAAMuQ,YAAYtF,EAAOnI,MAG1BqI,WAAW,SAACrI,GAChB,IAGMyH,EACAqG,ELwBVU,EAEMhS,EACAlC,EK/BG+N,EAAKnL,MAAMsK,sBAGVC,EAAOY,EAAKsF,SAAS7O,QACrBgP,EAAOzF,EAAKzF,UAAU9D,QAGT,WLqBvB0P,EKtByD/G,ELwBnDjL,EKxB6CsR,ELwB/BlC,yBACdtR,EAAIkU,EAAQ5C,yBAEZuC,OAAS3R,EAAEqP,KAKbvR,EAAEuR,IAAMrP,EAAE2R,OAHH,SAQP7T,EAAEuR,IAAMrP,EAAEqP,KAAOvR,EAAE6T,QAAU3R,EAAE2R,OACxB,cAGP7T,EAAEuR,KAAOrP,EAAEqP,KAAOvR,EAAE6T,OAAS3R,EAAE2R,OACxB,iBAGJ,YK3CC9F,EAAKnL,MAAMuR,eAjHfpG,EAAKzF,UR7C0sB,GQ8C/sByF,EAAKsF,SR9C0sB,KSkCvtB,OAAMvH,GAAgBtC,EAAO,GAAI4K,EAAwB,CAAE9I,OAAQ,SAElClN,QAAAgO,GA2BtBiI,gCAAP,WACIC,KAGGD,oBAAP,SAAczR,EAAOoD,aA2FSuO,EAhDAC,SA1ClBlJ,EAA4F1I,SAApFsJ,EAAoFtJ,WAA1EoJ,EAA0EpJ,oBAAvD6R,EAAuD7R,cAA1C8R,EAA0C9R,gBAA3B+R,EAA2B/R,cAAdgS,EAAchS,YAEhG4M,EAMAxJ,OALA0G,EAKA1G,UAJAuJ,EAIAvJ,UAHA4I,EAGA5I,SAFA6O,EAEA7O,SAFU4H,WAAQkH,aAClB9H,EACAhH,UACEqG,EAAa/N,KAAK+N,WAElB0I,GAAmBzJ,GAA4B,IAAlBA,EAAOrM,OAEpCsM,EAAUF,EACZ/M,KAAKsE,MAAMoS,SACXlQ,GAAMgI,QACNhI,GAAMmQ,cACHnQ,GAAM0K,MAAOA,aACb1K,GAAMyK,SAAUA,MAGjB2F,EAAoB5W,KAAKgR,UAAY,gBACrC6F,EAAe7W,KAAKgR,UAAY,WAChC8F,EAAmB9W,KAAKgR,UAAY,QAEpC+F,EAAoBT,GAAatJ,GAAUA,EAAOrM,QAAU2V,EAElE,OACItS,EAAC8O,OACG9O,SACIsN,MAAOrE,EACP7I,IAAKpE,KAAKgX,aACVC,eAAgBjX,KAAKkX,UACrBC,cAAenX,KAAK0R,WACpB9D,UAAW,EACX6D,YAAazR,KAAKoX,+BAElBpT,SAAKsN,MAAOvE,EAAGvG,GAAMxE,MAAOoC,IAAKpE,KAAKqX,QAAS7F,QAASxR,KAAKsX,aACzDtT,SAAK0L,GAAIkH,EAAmBtF,MAAOvE,EAAGvG,GAAM+Q,WAAY/Q,MAAO,CAAEgR,QAAS,SACrEzJ,EAAW/B,4BAGNkK,EAA6B,GAAV5G,EAAcG,EAAKuB,UAAY,OAAS1B,OAAS5C,EACtEM,GAA0B,EAAhBA,EAAOrM,OAEbqD,SACII,IAAKqL,EAAKgI,UACVnG,MAAOvE,EAAGvG,GAAMkR,aAChB9J,SAAUA,EACV4G,KAAK,6BACY,kCACI,+BACE0B,eACXC,qBACMS,EAClBe,QAASlI,EAAKmI,cACdC,OAAQpI,EAAKqI,aACbC,UAAWtI,EAAKuI,iBAEfhL,EAAO2H,IAAI,SAACpT,EAAiBgO,SACpB0I,EAAazB,EAASjH,GACtB2I,EAAW5I,IAAWC,EACtB6C,EAAMrF,EAAGvG,GAAMsG,aAChBtG,GAAMgQ,UAAWyB,EAClB9K,EAAC3G,GAAM8I,QAAS4I,MAEdxI,EAAKD,EAAKuB,UAAY,OAASzB,EAC/BnN,EAAQqN,EAAKO,aAAazO,GAC1BgG,EAASkI,EAAK0I,YAAY5W,GAChC,OACIyC,SACI0L,GAAIA,EACJ4B,MAAOc,EACPoC,KAAK,yBACUyD,eACH7V,EACZqP,YAAa,SAAC/P,GAAa,OAAAA,EAAE0W,mBAC7B5G,QAAS/B,EAAK4I,aAAa9I,IAE3BvL,SAAKsN,MAAO9K,GAAMsO,SAAUvN,OAOzC,OAIL0O,GAAYO,EAAS8B,KAAK,SAAA3S,GAAK,OAAM,IAANA,IAKjC3B,YACIuN,UALUxE,EAAGvG,GAAM+R,eACtB/R,GAAM+Q,WAAYvK,EAAOrM,OAAS,MAK/B6Q,QAAS/B,EAAK+I,sBACdb,QAASlI,EAAKgJ,sBACdxC,SAAUA,kBACKA,EACfyC,MAAO3K,EAAWvC,iCACNuC,EAAWvC,oBACvBnH,KAAK,UAELL,cACIA,EAAC6P,IAAOP,MAAO,GAAIJ,OAAQ,QAK3ClP,WAAO2U,aAASjM,EAAW6E,UAAW/K,GAAM+Q,WACvCnB,GAELpS,WACIK,KAAK,OACLD,IAAKpE,KAAK4Y,UACVrX,MAAO+O,EACPgB,MAAOvE,EAAGvG,GAAM8J,QAChBkE,KAAK,wBACOlQ,EAAM8R,kCACA,uBACJ,mBACHS,kBACIA,kBACA3F,EAAO,OAAS,gCACU,GAAlBxC,EAAQY,OAAcwH,EAAmBpI,EAAQY,YAAS5C,cACtE0B,EACXyK,QAAS7Y,KAAK8Y,cACdf,UAAW/X,KAAK+Y,gBAChBpB,QAAS3X,KAAKgZ,cACd3C,YAAaI,EAAkBJ,OAAc3J,IAEjD1I,SACIuN,UAAWxE,EAAGvG,GAAMyS,uBACP,EACbrL,UAAW,EACX4D,QAASxR,KAAKkZ,cACdR,MAAO3K,EAAW9B,qBAElBjI,EAACyP,IAAOP,OAAQ,GAAII,MAAO,QAItCpC,GACGlN,EAACqN,IACGC,MAAOvE,EAAG/M,KAAKsE,MAAMoS,SAAUlQ,GAAM2S,SAAU3S,GAAMmQ,OACrDnF,QAASxR,KAAKoZ,gBACdzG,WAAY3S,KAAKgX,aACjBrF,YAAa3R,KAAK2R,aAElB3N,EAAC8P,MACG9C,UAAW8F,EACX9C,+BAAgC+C,EAChCzC,cAAegC,EACf5I,kBAAmBA,EACnBK,WAAY/N,KAAK+N,WACjBpC,UAAW3L,KAAKgQ,aAChBJ,WAAY5P,KAAKqZ,aACjB5E,aAAcoC,EACdvG,OAAQA,GACJtQ,KAAK0H,MAAMgH,SACfN,QAASA,EACTwG,gBAAiB5U,KAAK4U,gBACtBC,YAAa7U,KAAKsZ,kBAClBzD,WAAY7V,KAAKuZ,wBAQlCxD,+BAAP,WACI,IAAM3D,EAAMpS,KAAKsE,MAAMkV,eACnBpH,GAAoB,EAAbA,EAAIzR,QACXX,KAAKgX,aAAa9Q,QAASiB,aAAa,QAASiL,IAkLlD2D,yBAAP,WACQ/V,KAAK0H,MAAMwJ,MACXlR,KAAKyZ,SAWL1D,6BAAR,SAAwBrO,GACpB2E,EAAM3E,EAAO,CACT,CACIwJ,MAAM,EACNxC,QAAS,CAAEA,aAAShC,GACpB4D,OAAQ,OAkEZyF,gCAAR,WAAA,IAIc2D,EAEAC,EAEFC,SAPFzM,EAAuBnN,KAAKsE,MAA1B0I,WAAQ6M,aACVC,EAAuB9Z,KAAK0H,MAAMsF,OAAhCwJ,aAAUlH,WACE,EAAhBtC,EAAOrM,QAAwB,GAAV2O,KACfoK,IAAiB1M,IACZ+M,OAAOzK,EAAQ,IACpBqK,IAAmBnD,IACZuD,OAAOzK,EAAQ,GACxBsK,EAAatK,EAAS,EACA,EAAtBqK,EAAahZ,SACbiZ,EAAaI,KAAK7N,IAAI,EAAGyN,IAE7B5Z,KAAKyO,YACD,CACIzB,OAAQ,CACJsC,OAAQsK,EACRpD,SAAUmD,IAGlB,WAC8B,IAAtBD,EAAW/Y,QACmB,MAA1B8O,EAAKmJ,UAAU1S,SACfuJ,EAAKmJ,UAAU1S,QAAQ+T,QAG/BJ,EAASH,OAxeX3D,gBAAevI,OAE7B,YAAYlJ,GAAZ,MACIkL,aAAMlL,SA0MFmL,oBAAoB,WACxBA,EAAKsF,YAGDtF,gCAAgC,SAACrI,GACrCqI,EAAKmJ,UAAU1S,QAAS+T,QACxB7S,EAAM8H,iBACN9H,EAAMgR,mBAGH3I,gBAAgB,SAACrI,GACHqI,EAAK/H,WAElB+H,EAAKgK,QAGLhK,EAAKa,OAAOb,EAAK/H,MAAM4I,OAAQb,EAAKnL,MAAM0I,OAAQ,CAAEkE,MAAM,IAF1DzB,EAAKmJ,UAAU1S,QAAS+T,QAK5B7S,EAAM8H,iBACN9H,EAAMgR,mBAGH3I,cAAc,SAACrI,GACdA,EAAMkF,SAAWmD,EAAK4H,QAAQnR,SAE9BuJ,EAAKmJ,UAAU1S,QAAS+T,SAIzBxK,YAAY,SAACrI,GAChBqI,EAAKhB,YAAY,CAAEwC,SAAS,KAGzBxB,aAAa,SAACrI,GACjB,IAAM8S,EAAW9S,EAAM+S,cACjBnQ,EAAYyF,EAAKuH,aAAa9Q,QAC9BiT,EAAW1J,EAAKkC,YAAYzL,QAC5B+K,EACFjH,EAAUoQ,SAASF,IAAcf,IAAaA,IAAae,GAAYf,EAASiB,SAASF,IAE7FzK,EAAKhB,YAAY,CACbwC,YAECA,GACDxB,EAAK4K,eAIN5K,gBAAgB,SAACrI,GACZ,IAAAkT,EAAgB7K,EAAKnL,mBACZmL,EAAK/H,YACT4S,GACT7K,EAAKa,OAAOb,EAAKmJ,UAAU1S,QAAS3E,MAAOkO,EAAKnL,MAAM0I,OAAQ,CAAEkE,MAAM,KAIvEzB,oBAAoB,SAACF,EAAenI,GACvCqI,EAAK8K,mBAAmBhL,IAGrBE,cAAc,SAACF,GAEJ,IAER9N,EADFgO,EAAK/H,sBACad,QACtBnF,EAAK8N,IAAU9N,EAAK8N,GACpBE,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEwJ,SAAU/U,EAAM6N,OAAQC,MAGlDE,wBAAwB,SAACrI,GAC5BqI,EAAK4K,eAGF5K,wBAAwB,SAACrI,GAEd,IAAAoP,EACV/G,EAAK/H,sBACHyF,EAAuBsC,EAAKnL,MAA1B0I,WAAQ6M,aACVpY,EAAOuL,EAAOpG,QAAQ+J,OAAO,SAACpP,EAAOgO,GAAU,OAACiH,EAASjH,KAC/DE,EAAKhB,YAAY,CACbzB,OAAQ,CACJwJ,SAAU/U,EAAKkT,IAAI,SAAA7R,GAAK,OAAA,OAGhC+W,EAASpY,GAETgO,EAAKmJ,UAAU1S,QAAS+T,SAGrBxK,gBAAgB,SAACrI,GACpB,IAAM7F,EAAS6F,EAAMkF,OAA4B/K,MACjDkO,EAAKa,OAAO/O,EAAOkO,EAAKnL,MAAM0I,OAAQ,CAAEkE,MAAM,KAG3CzB,kBAAkB,SAACrI,GACd,IAAA8J,EAASzB,EAAK/H,WAChB8S,EAAkBpT,EAAMkF,OAA4B/K,MAClDyL,EAAWyC,EAAKnL,aAsBxB,GAnBuB,KAAnBkW,IACCpT,EAAMjD,MAAQiI,EAAIqO,WAAarT,EAAMjD,MAAQiI,EAAIsO,SAClC,EAAhB1N,EAAOrM,QAEP8O,EAAKnF,SACD,SAAC2K,GACG,IAAMvN,EAAQwD,EAAO,GAAI+J,GAGzB,OAFAxF,EAAKkL,gBAAgBjT,GACrBA,EAAMsF,OAAOsC,OAAStC,EAAOrM,OAAS,EAC/B+G,GAEX,WACQ+H,EAAKgI,UAAUvR,SACfuJ,EAAKgI,UAAUvR,QAAQ+T,UAMnC/I,EAAM,CACN,GAAIzB,EAAKmL,8BAA8BxT,GACnC,OAEJ,GAAIqI,EAAKoL,mBACL,OAAQzT,EAAMjD,KACV,KAAKiI,EAAI0O,MACLrL,EAAKsL,kCAAkC3T,GACvC,MACJ,KAAKgF,EAAI4O,OACD9J,GACAzB,EAAKgK,QAETrS,EAAM8H,uBAKlB,OAAQ9H,EAAMjD,KACV,KAAKiI,EAAI+C,UACT,KAAK/C,EAAIgD,KACT,KAAKhD,EAAI0O,MACLrL,EAAKa,OAAO,GAAIb,EAAKnL,MAAM0I,OAAQ,CAAEkE,MAAM,MAMpDzB,eAAe,SAACF,GAAkB,OAAA,SAACnI,GACtCqI,EAAKwL,YAAY1L,GACjBnI,EAAM8H,iBACN9H,EAAMgR,oBAGH3I,gBAAgB,SAACrI,GAEhB,IAAA+F,EACAsC,EAAK/H,aADK4H,WAAQkH,aAEdxJ,EAAWyC,EAAKnL,aAGxB,GAAIgL,EAAS,GAAqB,EAAhBtC,EAAOrM,OAAY,CAEjC,IADA,IAAI4O,EAAQ,EACH/O,EAAI,EAAGA,EAAIgW,EAAS7V,OAAQH,IACjC,GAAIgW,EAAShW,GAAI,CACb+O,EAAQ/O,EACR,MAGRiP,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,OAAQC,KAEzCE,EAAK4K,eASF5K,QAAQ,SAACxB,GACZwB,EAAKnF,SAAS,SAAA5C,GAEV,OADA+H,EAAKkL,gBAAgBjT,GACdA,GACRuG,IAaAwB,eAAe,SAACrI,GACnBqI,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,QAAS,MAGnCG,kBAAkB,SAACrI,GACtB,IAAMkI,EAASG,EAAK/H,MAAMsF,OAAOsC,OACzBtC,EAAWyC,EAAKnL,aAExB,OAAQ8C,EAAMjD,KACV,KAAKiI,EAAI8O,UACT,KAAK9O,EAAI2C,QACT,KAAK3C,EAAI4C,GACT,KAAK5C,EAAI+O,KACQ,EAAT7L,GACAG,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,OAAQA,EAAS,KAElDlI,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIgP,WACT,KAAKhP,EAAIiP,MACT,KAAKjP,EAAI+C,UACT,KAAK/C,EAAIgD,KACDE,EAAStC,EAAOrM,OAAS,GACzB8O,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,OAAQA,EAAS,KAElDlI,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIkP,SAKT,KAAKlP,EAAImP,OAELnU,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIoP,KACL/L,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,OAAQ,KACrClI,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIqP,IACLhM,EAAKhB,YAAY,CAAEzB,OAAQ,CAAEsC,OAAQtC,EAAOrM,OAAS,KACrDyG,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIsP,MACT,KAAKtP,EAAIuP,SACLlM,EAAKwL,YAAY3L,GACjBlI,EAAM8H,iBACN,MAEJ,KAAK9C,EAAIqO,UACT,KAAKrO,EAAIsO,OACLjL,EAAKmM,uBAmCVnM,kBAAkB,SAACrI,GAGtBA,EAAM8H,iBACN9H,EAAMgR,kBACN3I,EAAKmJ,UAAU1S,QAAS+T,SAGrBxK,kBAAkB,SAAC7N,EAAawF,GAIV,SAAnByU,IACF/K,OAAOpG,WAAW,WACd+E,EAAKmJ,UAAU1S,QAAS+T,SACzB,GANC,IAAAK,EAAgB7K,EAAKnL,kBACvB0I,EAASyC,EAAKqM,aAAala,GAQ7B0Y,EACA7K,EAAKa,OAAO,GAAItD,EAAQ,GAAI6O,GAE5BpM,EAAKgK,MAAMoC,GAGfzU,EAAM8H,iBACN9H,EAAMgR,mBAGH3I,oCAAoC,SAACrI,GAChC,IAAAkT,EAAgB7K,EAAKnL,kBACvB1C,EAAS6N,EAAKsM,0BACd/O,EAASyC,EAAKqM,aAAala,GAC7B0Y,EACA7K,EAAKa,OAAO,GAAItD,EAAQ,CAAEkE,MAAM,IAEhCzB,EAAKgK,QAGTrS,EAAM8H,kBAGHO,eAAe,SAAC7N,GACb,IAAAuL,EAAuBsC,EAAKnL,MAA1B0I,WAAQ6M,aACVpY,EAAOuL,EAAOpG,QACpBnF,EAAKyB,KAAKtB,GAEV,IAAMQ,EAAQqN,EAAKO,aAAapO,GAIhC,OAHAkN,EAAkBW,EAAK1B,WAAWrC,WAAWtJ,IAE7CyX,EAASpY,GACFA,GA5hBC,IAAAuL,EAAW1I,gBAEnBmL,EAAKgI,UTjD0sB,GSkD/sBhI,EAAKmJ,UTlD0sB,GSmD/sBnJ,EAAK4H,QTnD0sB,GSoD/sB5H,EAAKuH,aTpD0sB,GSqD/sBvH,EAAKkC,YTrD0sB,GSuD/sBlC,EAAK/H,MAAQwD,EAAOuE,EAAK/H,MAAO,CAC5BsF,OAAQ,CACJsC,QAAS,EACTkH,SAAUxJ,EAAO2H,IAAI,SAAA7R,GAAK,OAAA,SC7B1C,OAAM0K,GAAgBtC,EAAO,GAAI4K,EAAwB,CAAEkG,YAAY,QAErClc,QAAAgO,GAqBvBmO,gCAAP,WACIjG,KAGGiG,oBAAP,SAAc3X,EAAOoD,aA2DSuO,SA1DlBvI,EAAgEpJ,oBAA7CsJ,EAA6CtJ,WAAnClC,EAAmCkC,QAA5B0X,EAA4B1X,aAAhB+R,EAAgB/R,cAChE/C,EAAmDmG,QAA5CwJ,EAA4CxJ,OAAtC0G,EAAsC1G,UAA7BuJ,EAA6BvJ,UAApB4I,EAAoB5I,SAAZgH,EAAYhH,UAErDuF,EAAUF,EACZ/M,KAAKsE,MAAMoS,SACXlQ,GAAMgI,QACNhI,GAAM0V,eACH1V,GAAM0K,MAAOA,aACb1K,GAAMyK,SAAUA,MAEjB4F,EAAe7W,KAAKgR,UAAY,WAChCmL,EAAcnc,KAAKgR,UAAY,OAC/B8F,EAAmB9W,KAAKgR,UAAY,QACpCjD,EAAa/N,KAAK+N,WAClB0I,GAAmBlV,GAAS8U,GAAoC,EAArBA,EAAY1V,OACvDyb,EAAmBpc,KAAKgR,UAAY,eAC1C,OACIhN,EAAC8O,OACG9O,SACIsN,MAAOrE,EACP7I,IAAKpE,KAAKgX,aACVC,eAAgBjX,KAAKkX,UACrBC,cAAenX,KAAK0R,WACpB9D,UAAW,EACX6D,YAAazR,KAAKqc,sBAElBrY,SAAKsN,MAAOvE,EAAGvG,GAAMxE,MAAOoC,IAAKpE,KAAKqX,SAClCrT,sBACgB5B,EACZoS,KAAK,kCACkB2H,kBACT,QACd7K,MAAOvE,EAAGvG,GAAMjF,OAChBqM,SAAUA,EACVxJ,IAAKpE,KAAKsc,SACVvE,UAAW/X,KAAKuc,kCACE9F,EAAkB2F,OAAmB1P,GAEtDnL,GACGyC,SACIsN,MAAO9K,GAAMsG,KACb0H,KAAK,yBACS,oBACFxU,KAAKgQ,aAAazO,mBACf,mBACC,EAChBmO,GAAIyM,GAEJnY,SAAKsN,MAAO9K,GAAMsO,SAAU9U,KAAKmY,YAAY5W,KAGpDkV,GACGzS,SAAKsN,MAAOvE,EAAGvG,GAAM6P,aAAc3G,GAAI0M,GAClC/F,KAKHJ,GAAY1U,EAGdyC,YACIsN,MAHMvE,EAAGvG,GAAM+R,eAAW/R,GAAM+Q,YAAayE,MAI7CxK,QAAS/B,EAAK+M,aACd7E,QAASlI,EAAKgN,aACdhL,YAAahC,EAAKiN,iBAClBzG,SAAUA,kBACKA,EACfyC,MAAO3K,EAAWtC,gCACNsC,EAAWtC,mBACvBpH,KAAK,UAELL,cACIA,EAAC6P,IAAOP,MAAO,GAAIJ,OAAQ,QAK3ClP,SAAKuN,UAAW/K,GAAMyS,sBAAqB,EAAMP,MAAO3K,EAAW9B,qBAC/DjI,EAACyP,IAAOP,OAAQ,GAAII,MAAO,QAItCpC,GACGlN,EAACqN,IACGC,MAAOvE,EAAGvG,GAAM2S,SAAU3S,GAAM0V,OAAQlc,KAAKsE,MAAMoS,UACnDjF,YAAazR,KAAK2c,oBAClBhK,WAAY3S,KAAKgX,aACjBrF,YAAa3R,KAAK2R,YAClBD,WAAY1R,KAAK0R,WACjBmB,oBAAqB7S,KAAK4c,eAE1B5Y,aACIA,WACIK,KAAK,OACLD,IAAKpE,KAAK4Y,UACVrX,MAAO+O,EACPgB,MAAOvE,EAAGvG,GAAM8J,QAChBkE,KAAK,+BACa,uBACJ,mBACHqC,kBACIA,kBACA3F,EAAO,OAAS,gCAET,GAAlBxC,EAAQY,OAAcwH,EAAmBpI,EAAQY,YAAS5C,cAEnD0B,EACXyK,QAAS7Y,KAAK8Y,cACdf,UAAW/X,KAAK+Y,gBAChBpB,QAAS3X,KAAKgZ,gBAElBhV,EAAC8P,MACG9C,UAAW8F,EACXpJ,kBAAmBA,EACnBK,WAAY/N,KAAK+N,WACjBpC,UAAW3L,KAAKgQ,aAChBJ,WAAY5P,KAAKqZ,aACjB5E,aAAcoC,EACdvG,OAAQA,GACJtQ,KAAK0H,MAAMgH,SACfN,QAASA,EACTwG,gBAAiB5U,KAAK4U,gBACtBC,YAAa7U,KAAKsZ,kBAClBzD,WAAY7V,KAAKuZ,yBAStC0C,+BAAP,WACI,IAAM7J,EAAMpS,KAAKsE,MAAMkV,eACnBpH,GAAoB,EAAbA,EAAIzR,QACXX,KAAKgX,aAAa9Q,QAASiB,aAAa,QAASiL,IAuClD6J,yBAAP,WACQjc,KAAK0H,MAAMwJ,MACXlR,KAAKyZ,SAiBLwC,6BAAR,WACI,OAAOjc,KAAK0H,MAAMnG,MAAQ,CAACvB,KAAK0H,MAAMnG,OAAS,IAa3C0a,kBAAR,SAAa5N,gBAAAA,MACTrO,KAAKsQ,OAAOjC,EAAOrO,KAAK6c,kBAAmB,CAAE3L,MAAM,KApOzC+K,gBAAezO,OAE7B,YAAYlJ,GAAZ,MACIkL,aAAMlL,gBA4JFmL,oBAAoB,WACxBA,EAAKsF,YAGFtF,YAAY,SAACrI,GAChBqI,EAAKhB,YAAY,CAAEwC,SAAS,IAEpB,IAAAqJ,EAAgB7K,EAAKnL,mBACZmL,EAAK/H,YACT4S,GAAe7K,EAAKmJ,UAAU1S,UAAYuC,SAASqU,eAC5DrN,EAAKyB,QAINzB,aAAa,SAACrI,GACjB,IAAM8S,EAAW9S,EAAM+S,cACjBnQ,EAAYyF,EAAKuH,aAAa9Q,QAC9BiT,EAAW1J,EAAKkC,YAAYzL,QAC5BoK,EAASb,EAAKmJ,UAAU1S,QAExB+K,EACFjH,EAAUoQ,SAASF,IAClBf,IAAaA,IAAae,GAAYf,EAASiB,SAASF,KACzDA,IAAa5J,EAEbb,EAAK/H,MAAMuJ,UAAYA,GACvBxB,EAAKhB,YAAY,CACbwC,YAGHA,GACDxB,EAAK4K,eAUN5K,QAAQ,SAAC/H,GACI+H,EACR6M,SAASpW,QAAS+T,QAC1BxK,EAAKhB,YAAY,CACb/G,EACA,CACIwJ,MAAM,EACNxC,QAAS,CAAEA,QAAS,MACpB4B,OAAQ,OASZb,uBAAuB,SAACrI,GAC5BA,EAAMgR,kBACNhR,EAAM8H,iBACFO,EAAK/H,MAAMwJ,KACXzB,EAAKgK,QAELhK,EAAKyB,QAQLzB,gBAAgB,WACpBA,EAAKmJ,UAAU1S,QAAQ+T,SAGnBxK,gBAAgB,SAACrI,GACrBqI,EAAKhB,YAAY,CAAEwC,SAAS,KAGxBxB,gBAAgB,SAACrI,GACrB,IAAM7F,EAAS6F,EAAMkF,OAA4B/K,MACjDkO,EAAKa,OAAO/O,EAAOkO,EAAKoN,oBAGpBpN,eAAe,SAACrI,GACpBqI,EAAK4K,eAGD5K,eAAe,SAACrI,GACpBqI,EAAKqM,kBAAapP,GAClBtF,EAAM8H,iBACN9H,EAAMgR,mBAGF3I,mBAAmB,SAACrI,GACxBA,EAAMgR,kBACNhR,EAAM8H,kBAGHO,kBAAkB,SAACrI,GACtB,IAAIqI,EAAKmL,8BAA8BxT,KAItBqI,EAAK/H,YAEV+H,EAAKoL,kBACb,OAAQzT,EAAMjD,KACV,KAAKiI,EAAI0O,MACLrL,EAAKsN,qBACL3V,EAAM8H,iBACN9H,EAAMgR,kBACN,MACJ,KAAKhM,EAAI4O,OACLvL,EAAKgK,QACLrS,EAAM8H,iBACN9H,EAAMgR,kBACN,MACJ,KAAKhM,EAAI4Q,IAELvN,EAAKgK,QACLrS,EAAM8H,iBACN9H,EAAMgR,oBAKf3I,qBAAqB,WAEV,GADKA,EAAK/H,MAAMgH,gBAE1Be,EAAKqM,aAAarM,EAAKsM,4BAIxBtM,eAAe,SAAC7N,GACX,IAAAiY,EAAapK,EAAKnL,eAE1BmL,EAAKgK,MAAM,CAAElY,MAAOK,IAKpBiY,EAASjY,IAGL6N,iBAAiB,SAACrI,GACtB,OAAQA,EAAMjD,KACV,KAAKiI,EAAIsP,MACT,KAAKtP,EAAI+C,UACT,KAAK/C,EAAIgD,KAIL,OAHAK,EAAKyB,OACL9J,EAAM8H,sBACN9H,EAAMgR,kBAIW,IAArBhR,EAAMjD,IAAIxD,QAEV8O,EAAKyB,QAILzB,sBAAsB,SAACrI,GAC3BqI,EAAKmJ,UAAU1S,QAAQ+T,QACvB7S,EAAM8H,iBACN9H,EAAMgR,mBAGH3I,oBAAoB,SAACF,EAAenI,GACvCqI,EAAK8K,mBAAmBhL,IAGrBE,kBAAkB,SAAC7N,EAAawF,GACnCqI,EAAKqM,aAAala,GAClBwF,EAAM8H,iBACN9H,EAAMgR,mBA1UN3I,EAAKmJ,UV3C0sB,GU4C/sBnJ,EAAK4H,QV5C0sB,GU6C/sB5H,EAAKuH,aV7C0sB,GU8C/sBvH,EAAKkC,YV9C0sB,GU+C/sBlC,EAAK6M,SV/C0sB,GUiD/sB7M,EAAK/H,MAAQwD,EAAOuE,EAAK/H,MAAO,CAAEnG,MAAOkO,EAAKnL,MAAM/C,UCjD5D,ICcK0b,ODTMC,iBAAP,SAAW/Y,GACP,OAAOnE,KAAKmd,MAAMnS,IAAI7G,IAEnB+Y,iBAAP,SAAW/Y,EAAa5C,GACpBvB,KAAKmd,MAAM9R,IAAIlH,EAAK5C,IAGV2b,YAAd,SAAuB/Y,GACnB,IAAIgZ,EAAQD,GAAME,OAAOpS,IAAI7G,GAK7B,OAJKgZ,IACDA,EAAQ,IAAID,GACZA,GAAME,OAAO/R,IAAIlH,EAAKgZ,IAEnBA,GAGGD,YAAd,SAAuB/Y,GACnB,OAAO+Y,GAAME,OAAOxM,IAAIzM,IAGd+Y,eAAd,SAA0B/Y,GACtB+Y,GAAME,OAAOC,OAAOlZ,IAzBT+Y,UAAS,IAAII,YADhC,cAGYtd,WAAQ,IAAI4K,IC+CxB,IAAM2S,GAAuB,CACzBxP,WAAY,QACZL,kBAAmB,EACnB4M,eAvCC2C,GAAAA,6BA0CCO,GAA+BtS,EAAO,GAAIqS,GAAsB,CAClEE,YAAa,SAACzQ,EAAoBuH,GAC9B,OAAIvH,GAA0B,EAAhBA,EAAOrM,OACVqM,EAAO2H,IAAI,SAAA7H,GAAQ,OAAAA,EAAK4C,KAAItC,KAAK,KAEjC,MAKbsQ,GAAgCxS,EAAO,GAAIqS,GAAsB,CACnEvB,YAAY,EACZyB,YAAa,SAAClc,EAAiBgT,GAC3B,OAAIhT,EACOA,EAAMmO,GAEN,MAKnB,SAASiO,GAAgB/H,EAAsB9M,GAC3C,IAAM1B,EAAQqB,SAASmV,YAAY,cACnCxW,EAAMyW,UAAU,UAAU,GAAO,GACjCzW,EAAM0B,GAAQA,EACd8M,EAAQkI,cAAc1W,GAG1B,WAAiCtH,QAAA+N,GAYtBkQ,gCAAP,WACI/d,KAAKge,eAAehe,KAAK0H,MAAMsF,SAG5B+Q,+BAAP,WACI/d,KAAKge,eAAehe,KAAK0H,MAAMsF,SAG5B+Q,oBAAP,SAAczZ,EAAOoD,EAAO3C,GACxB,IAAMkZ,EAAOje,KAAKsE,MAAMiQ,QACxB,OACIvQ,EAAC+R,IACGW,SAAUuH,EAAKvH,SACf8C,eAAgByE,EAAKzE,eACrBnD,YAAa4H,EAAK5H,YAClBF,YAAa8H,EAAK9H,YAClBC,cAAe6H,EAAK7H,cACpB8H,aAAcD,EAAKC,aACnBC,cAAeF,EAAKE,cACpB9P,MAAO4P,EAAK5P,MACZV,MAAOsQ,EAAKtQ,MACZD,kBAAmBuQ,EAAKvQ,kBACxB4M,YAAa2D,EAAK3D,YAClBvM,WAAYkQ,EAAKlQ,WACjBH,SAAUqQ,EAAKrQ,SACfH,gBAAiBwQ,EAAKxQ,gBACtBT,OAAQhN,KAAK0H,MAAMsF,OACnB6M,SAAU7Z,KAAK6Z,SACfvD,UAAW2H,EAAK3H,aAWpByH,4BAAR,SAAuB/Q,GACb,IAAAG,EAAuBnN,KAAKsE,MAA1BsR,YAASrB,YACjBqB,EAAQrU,MAAQgT,EAAQkJ,YAAYzQ,EAAQuH,QA9ChD,YAAYjQ,GAAZ,MACIkL,aAAMlL,gBAqCHmL,WAAW,SAACzC,GACfyC,EAAKnF,SAAS,CAAE0C,WAChByC,EAAKuO,eAAehR,GACpB2Q,GAAgBlO,EAAKnL,MAAMsR,QAAS5I,IAvCpCyC,EAAK/H,MAAQ,CAAEsF,OAAQ1I,EAAMiQ,QAAQvH,QAAU,MAgDvD,WAAkClN,QAAA+N,GAYvBuQ,+BAAP,WACIpe,KAAKge,eAAehe,KAAK0H,MAAMnG,QAG5B6c,gCAAP,WACIpe,KAAKge,eAAehe,KAAK0H,MAAMnG,QAG5B6c,oBAAP,SAAc9Z,EAAOoD,EAAO3C,GACxB,IAAMkZ,EAAOje,KAAKsE,MAAMiQ,QACxB,OACIvQ,EAACiY,IACG7Z,MAAO6b,EAAK7b,MACZsU,SAAUuH,EAAKvH,SACf8C,eAAgByE,EAAKzE,eACrBwC,WAAYiC,EAAKjC,WACjB3F,YAAa4H,EAAK5H,YAClB6H,aAAcD,EAAKC,aACnBC,cAAeF,EAAKE,cACpB9P,MAAO4P,EAAK5P,MACZV,MAAOsQ,EAAKtQ,MACZD,kBAAmBuQ,EAAKvQ,kBACxB4M,YAAa2D,EAAK3D,YAClBvM,WAAYkQ,EAAKlQ,WACjBH,SAAUqQ,EAAKrQ,SACfrM,MAAOvB,KAAK0H,MAAMnG,MAClBsY,SAAU7Z,KAAK6Z,YAWnBuE,4BAAR,SAAuB7c,GACb,IAAA4L,EAAuBnN,KAAKsE,MAA1BsR,YAASrB,YACjBqB,EAAQrU,MAAQgT,EAAQkJ,YAAYlc,EAAOgT,QA5C/C,YAAYjQ,GAAZ,MACIkL,aAAMlL,gBAmCHmL,WAAW,SAAClO,GACfkO,EAAKnF,SAAS,CAAE/I,UAChBkO,EAAKuO,eAAezc,GACpBoc,GAAgBlO,EAAKnL,MAAMsR,QAASrU,IArCpCkO,EAAK/H,MAAQ,CAAEnG,MAAO+C,EAAMiQ,QAAQhT,SA4E5C,SAAS8c,GAAgBzI,EAA2BrB,OCnNhBtG,ECLAqQ,EFsOxB9X,EASA+X,EAtBHhK,EAAQlG,QACLkG,EAAQ+J,KACR/J,EAAQlG,OE1NhBiQ,EAAOpT,EAAO,GADkBoT,EF2NY/J,EAAQ+J,KE1N5B,CACpBlT,OAAA,SAAOoT,EAAclQ,GACjB,MAAO,CAAEkQ,OAAMlQ,SAEnBmQ,QAAA,SAAQ3V,GACJ,IAAM4V,EAAOC,KAAKC,MAAM9V,GACxB,MAAO,CACH+F,KAAM6P,EAAK7P,KACX7B,OAAQ0R,EAAK1R,WAKlB,SAACwR,EAAclQ,EAAcJ,GAChC,OAAO,IAAI/M,QAAQ,SAACC,EAASC,GACzB,IAGQwd,EAHJC,EAAMR,EAAKQ,IACT1T,EAASkT,EAAKlT,OAAOoT,EAAMlQ,GAC7BlD,IACIyT,EAAgC,GAApBC,EAAI7Z,QAAQ,KAAY,IAAM,IAC9CzF,OAAOuf,QAAQ3T,GAAQyB,QAAQ,SAACM,OAAChJ,OAAK5C,OAClCud,GAAOD,EACPA,EAAY,IACZC,GAAOE,mBAAmB7a,GAAO,IAAM6a,mBAAmBzd,MAIlE,IAAM0d,EAAU,IAAIC,eACpBD,EAAQ/N,KAAK,MAAO4N,GAAK,GACzBG,EAAQE,OAAS,WACb,IACUrW,EADY,KAAlBmW,EAAQG,QAAiBH,EAAQG,OAAS,KACpCtW,EAAOwV,EAAKG,QAAQQ,EAAQI,cAClCje,EAAQ,CAAE4L,OAAQlE,EAAKkE,OAAQ6B,KAAM/F,EAAK+F,KAAMX,YAE5CoQ,EAAKgB,SACLhB,EAAKgB,QAAQL,EAAQI,aAAcJ,EAAQG,QAE/C/d,MAGR4d,EAAQK,QAAU,WACVhB,EAAKgB,SACLhB,EAAKgB,UAETje,KAEJ4d,EAAQM,WF8KDhL,EAAQzL,OACfyL,EAAQlG,OCxNgBJ,EDwNYsG,EAAQzL,KCvN7C,SAAC0V,EAAclQ,EAAcJ,GAChC,OAAO,IAAI/M,QAAQ,SAACC,EAASC,GACzB,IAAMyH,EAAOmF,EAAS,CAAEuQ,OAAMlQ,OAAMkI,SAAU,KAC9CpV,EAAQ,CAAE4L,OAAQlE,EAAKkE,OAAQ6B,KAAM/F,EAAK+F,KAAMX,iBDwNnDqG,EAAQ3G,UAAYgI,EAAQhI,WAC7B2G,EAAQ3G,SAAWgI,EAAQhI,UAG3BgI,EAAQ4J,aAAa,8BAEF,GADfhZ,EAAQ+N,EAAQiF,gBAAkB,IAC5B7Y,SACN6F,GAAS,KAEbA,GAASoP,EAAQ4J,aAAa,4BAC9BjL,EAAQiF,eAAiBhT,GAGzBoP,EAAQ4J,aAAa,8BAEF,GADfjB,EAAQhK,EAAQmC,UAAY,IACtB/V,SACN4d,GAAS,KAEbA,GAAS3I,EAAQ4J,aAAa,4BAC9BjL,EAAQmC,SAAW6H,OAerBkB,GAAW,CACbC,kBA3DJ,SAA2B9J,EAA2BrB,GAElD8J,GAAgBzI,EADhBrB,EAAUrJ,EAAO,GAAIsS,GAA8BjJ,IAGnD,IAAM4I,EAAQD,GAAMyC,SAAS/J,GAGvBzD,EAAgByD,EAAQzD,cACxByN,EAAgBnX,SAASG,cAAc,OAC7CuJ,EAAcpM,aAAa6Z,EAAehK,GAC1CuH,EAAM9R,IAAI4R,GAAU2C,cAAeA,GAEnCrY,EAAOvD,EAAC+Z,IAAmBnI,QAASA,EAASrB,QAASA,IAAapC,EAAeyN,IAgDlFC,mBA3EJ,SAA4BjK,EAA2BrB,GAEnD8J,GAAgBzI,EADhBrB,EAAUrJ,EAAO,GAAIwS,GAA+BnJ,IAGpD,IAAM4I,EAAQD,GAAMyC,SAAS/J,GAGvBzD,EAAgByD,EAAQzD,cACxByN,EAAgBnX,SAASG,cAAc,OAC7CuJ,EAAcpM,aAAa6Z,EAAehK,GAC1CuH,EAAM9R,IAAI4R,GAAU2C,cAAeA,GAEnCrY,EAAOvD,EAACoa,IAAoBxI,QAASA,EAASrB,QAASA,IAAapC,EAAeyN,IAgEnFE,QAdJ,SAAiBlK,GACb,IAIMgK,EAJD1C,GAAM6C,SAASnK,KAIdgK,EADQ1C,GAAMyC,SAAS/J,GACD5K,IAAIiS,GAAU2C,eAE1CrY,EAAO,KADeqO,EAAQzD,cACFyN,GAC5B1C,GAAM8C,YAAYpK,MAiBtB9E,OAAO2O,SAAWA"}